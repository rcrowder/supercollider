<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #61699c}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a41c14}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #383631; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #a41c14}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #001ee6}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0018b8}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Helvetica; min-height: 11.0px}
p.p17 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 10.0px Monaco; color: #545669}
span.s1 {color: #000000}
span.s2 {text-decoration: underline ; color: #1e3bd0}
span.s3 {color: #1638e6}
span.s4 {color: #61699c}
span.s5 {color: #0000ff}
span.s6 {color: #5d67a2}
span.s7 {color: #314bd1}
span.s8 {color: #0018b8}
span.s9 {color: #606060}
span.s10 {color: #5461ad}
span.s11 {font: 10.0px Monaco; color: #383631}
span.s12 {color: #a41c14}
span.s13 {text-decoration: underline}
span.s14 {color: #5a65a5}
span.s15 {color: #356f14}
span.s16 {font: 12.0px Helvetica}
span.s17 {color: #0c2eee}
span.s18 {font: 10.0px Monaco; color: #0018b8}
span.s19 {font: 10.0px Monaco}
span.s20 {color: #0020f6}
span.s21 {font: 10.0px Monaco; color: #545669}
span.s22 {text-decoration: underline ; color: #1534d7}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>GUI Overview and Introduction</b></p>
<p class="p2"><br></p>
<p class="p3"><span class="s1">See also: <a href="GUI-Classes.html"><span class="s2">GUI-Classes</span></a>, <a href="GUI.html"><span class="s3">GUI</span></a></span><span class="s3">, <a href="ViewRedirect.html"><span class="s4">ViewRedirect</span></a></span>.</p>
<p class="p4"><br></p>
<p class="p5">SuperCollider provides for using different gui kits, and also provides syntax for transparently writing kit and platform independent code. Two main classes control this mechnanism: the gui factory abstraction class, <a href="GUI.html"><span class="s4">GUI</span></a>, and the subclasses of <a href="ViewRedirect.html"><span class="s5">ViewRedirect</span></a>, which transparently use the <a href="GUI.html"><span class="s6">GUI</span></a> class to redirect to the kit-specific gui class. The default gui kit is CocoaGUI.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">For a table of all gui classes and their equivalents, see <a href="GUI-Classes.html"><span class="s7">GUI-Classes</span></a><span class="s4">.<span class="Apple-converted-space"> </span></span></p>
<p class="p5">For information on switching gui kits, see the documentation for <a href="GUI.html"><span class="s4">GUI</span></a>.</p>
<p class="p4"><br></p>
<p class="p6"><b>Basic usage: Kits and Syntax</b></p>
<p class="p7"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s8">Window</span><span class="s1">(</span><span class="s9">"Test Window"</span><span class="s1">).front; </span>// Window is a subclass of ViewRedirect</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w.postln </span>// w now caontains the class appropriate to the gui kit</p>
<p class="p7"><br></p>
<p class="p5">Kit-dependant gui classes<span class="Apple-converted-space">  </span>have a prefix. For example, to make a window, the CocoaGUI kit uses <a href="SCWindow.html"><span class="s6">SCWindow</span></a> or the swing kit uses <a href="../SwingOSC/JSCWindow.html"><span class="s6">JSCWindow</span></a>. It is generally discouraged to use the kit-dependant classes directly. Instead, there are basically two techniques for writing kit-independent code: using <a href="GUI.html"><span class="s10">GUI</span></a> and using the subclasses of <a href="ViewRedirect.html"><span class="s4">ViewRedirect</span></a><span class="s4">.</span></p>
<p class="p4"><br></p>
<p class="p5">For the simplest<span class="Apple-converted-space">  </span>syntax, you can use the subclasses of <a href="ViewRedirect.html"><span class="s4">ViewRedirect</span></a>, and simply use the class base name without any prefix, like in the example above.<span class="Apple-converted-space">  </span>Behind the scenes, the above technique actually automatically redirects to the appropriate GUI class method.</p>
<p class="p4"><span class="Apple-converted-space"> </span></p>
<p class="p5">Depending on the curent GUI.scheme the example above is equivalent to writing, for example:</p>
<p class="p4"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">SCWindow</span><span class="s1">(</span><span class="s9">"Test Window"</span><span class="s1">).front; </span>// cocoa version</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="s11"><span class="Apple-tab-span">	</span></span>or</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">JSCWindow</span><span class="s1">(</span><span class="s9">"Test Window"</span><span class="s1">).front; </span>// swing version</p>
<p class="p4"><br></p>
<p class="p6"><b>Basic Usage: Windows, Containers and Decorators</b></p>
<p class="p7"><br></p>
<p class="p5">For a complete table of gui classes , see <a href="GUI-Classes.html"><span class="s7">GUI-Classes</span></a><span class="s4">.</span></p>
<p class="p7"><br></p>
<p class="p11">(</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s8">var</span> w, b;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// Window returns the window class for the current kit</p>
<p class="p11"><span class="Apple-tab-span">	</span>w = <span class="s8">Window</span>( <span class="s9">"my name is... panel"</span>, <span class="s8">Rect</span>( 128, 64, 340, 360 ));</p>
<p class="p2"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>w.view.decorator = <span class="s8">FlowLayout</span>( w.view.bounds ); <span class="s12">// comment this out for no decorator</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>w.view.background = <span class="s8">Color</span>( 0.6, 0.8, 0.8 );</p>
<p class="p2"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>32.do({ <span class="s8">arg</span> i;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Here Button returns the button class for the current kit</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s8">Button</span>( w, <span class="s8">Rect</span>( rrand( 20, 300 ), rrand( 20, 300 ), 75, 24 ));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.states = [[ <span class="s9">"Start "</span> ++ i, <span class="s8">Color</span>.black, <span class="s8">Color</span>.rand ],</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[ <span class="s9">"Stop "</span> ++ i, <span class="s8">Color</span>.white, <span class="s8">Color</span>.red ]];</p>
<p class="p11"><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p11">)</p>
<p class="p2"><br></p>
<p class="p8"><span class="s1">w.postln<span class="Apple-converted-space">  </span></span>//returns the window class for the current gui kit</p>
<p class="p8"><span class="s1">b.postln<span class="Apple-converted-space">  </span></span>//returns the button class for the current gui kit</p>
<p class="p7"><br></p>
<p class="p5">In the above example, first a <a href="stubs/Window.html"><span class="s4">Window</span></a> was created. A <a href="stubs/Window.html"><span class="s4">Window</span></a> automatically has a container, an instance of <a href="stubs/CompositeView.html"><span class="s4">CompositeView</span></a> (actually a kit dependent subclass, e.g. SCTopView or SCScrollTopView). A container can have a <b>decorator</b>, which automatically places the contents in a predetermined order. In this case it is a <a href="FlowLayout.html"><span class="s4">FlowLayout</span></a>, which is the only one that currently exists. This is optional however. Try commenting out the decorator in the example above.</p>
<p class="p7"><br></p>
<p class="p5">Most gui objects are subclasses of <a href="stubs/View.html"><span class="s4">View</span></a>. All subclasses of View are created with the same beginning arguments, <b>parent </b>and <b>bounds</b>, for example, <a href="stubs/Slider.html"><span class="s4">Slider</span></a>(<b>parent</b>, <b>bounds</b>).</p>
<p class="p4"><br></p>
<p class="p5">The <b>parent</b> is a container view of some kind, and the <b>bounds</b> are an instance of <a href="../Geometry/Rect.html"><span class="s4">Rect</span></a> or a <a href="../Geometry/Point.html"><span class="s4">Point</span></a> (for width and height only). Using a Point is convenient if you are using a decorator for the postioning.</p>
<p class="p7"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s8">Window</span><span class="s1">.new.front;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Use Rect for precise placement in a CompositeVew</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">Slider</span><span class="s1">(w, </span><span class="s8">Rect</span><span class="s1"> (50,50,250,20));<span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span></span>// Slider is actually placed in w.view, which is a top view.</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">Slider</span><span class="s1">(w.view, </span><span class="s8">Rect</span><span class="s1"> (50,100,250,20)) </span>// So this is equivalent when Window is used as a parent</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p7"><br></p>
<p class="p5">You can easily nest containers, decorators and views to make complex layouts, and you can use colors to visually separate them:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>w=<span class="s8">Window</span>.new.front;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w.view.decorator = </span><span class="s8">FlowLayout</span><span class="s1">(w.view.bounds); </span>// notice that FlowView refers to w.view, not w</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v=<span class="s8">CompositeView</span>(w, <span class="s8">Rect</span>(5,5,190,390));</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.background = <span class="s8">Color</span>.rand; <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s12">// set the color</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v.decorator = <span class="s8">FlowLayout</span>(v.bounds);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>y=<span class="s8">CompositeView</span>(w, <span class="s8">Rect</span>(205,5,190,390));</p>
<p class="p11"><span class="Apple-tab-span">	</span>y.background = <span class="s8">Color</span>.rand;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s12">// set the color</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>y.decorator = <span class="s8">FlowLayout</span>(y.bounds);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>14.do{</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s8">Slider</span><span class="s1">(v, 180@20); </span>// Points used, since the layout is handled by a decorator.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Slider</span>(y, 180@20);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p6"><b>Coordinates</b></p>
<p class="p7"><br></p>
<p class="p5">For views,<span class="Apple-converted-space">  </span>the <b>absolute</b> bounds coordinates are measured from the <a href="stubs/Window.html"><span class="s6">Window</span></a>'s<span class="Apple-converted-space">  </span><b>top</b> left corner.<span class="Apple-converted-space"> </span></p>
<p class="p5">The bounds.rect<span class="Apple-converted-space">  </span>is the following: Rect(left, <b>top</b>, width,height). Remember, to place views yourself, you will use no decorator.</p>
<p class="p12"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s8">Window</span><span class="s1">.new.front;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Us Rect for precise placement in a CompositeVew</p>
<p class="p11"><span class="Apple-tab-span">	</span>v=<span class="s8">CompositeView</span>(w, <span class="s8">Rect</span>(50,50,300,300));</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>v.background_(</span><span class="s8">Color</span><span class="s1">.grey);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// give the subview a visible color</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">Slider</span><span class="s1">(v, </span><span class="s8">Rect</span><span class="s1"> (50,50,220,20)) <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// so this is equivalent when Window is used as a parent</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p5">For views, you can use <b>relative</b> bounds coordinates, which are measured from the parent <b>view's</b><span class="Apple-converted-space">  </span>top left corner.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s8">Window</span><span class="s1">.new.front;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Us Rect for precise placement in a CompositeVew</p>
<p class="p11"><span class="Apple-tab-span">	</span>v=<span class="s8">CompositeView</span>(w, <span class="s8">Rect</span>(50,50,300,300));</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>v.background_(</span><span class="s8">Color</span><span class="s1">.grey);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// give the subview a visible color</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.relativeOrigin = <span class="s8">true</span>;<span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s12">// use relative coordinates</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span><span class="s8">Slider</span><span class="s1">(v, </span><span class="s8">Rect</span><span class="s1"> (50,50,220,20)) <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// so this is equivalent when Window is used as a parent</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p5">See CompositeView for details on using relative coordinates. Only <a href="stubs/CompositeView.html"><span class="s6">CompositeView</span></a> and the <a href="stubs/UserView.html"><span class="s6">UserView</span></a> can<span class="Apple-converted-space">  </span>use relative origin for their contents.</p>
<p class="p4"><br></p>
<p class="p5">For a <a href="stubs/Window.html"><span class="s6">Window</span></a>, the bounds coordinates are measured from the <b>bottom</b> left of the screen.</p>
<p class="p5">The bounds.rect differs from that of views, and is the following: Rect(left, <b>bottom</b>, width,height). Typically, you will call Window.screenBounds to place a window precisely independently of the screen size you are working on.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>w=</span><span class="s8">Window</span><span class="s1">.new(</span>"A Precisely Placed Window"<span class="s1">,</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Rect</span>(100, <span class="s8">Window</span>.screenBounds.height-300, 300, 200<span class="Apple-converted-space">  </span>) <span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>).front;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>) </span>//since the window is 200 high and the bottom is at screenBounds.height-300, the top is 100 from th screen top</p>
<p class="p12"><br></p>
<p class="p6"><b>Resizing</b></p>
<p class="p4"><br></p>
<p class="p5">Views can display resize behavior according to nine differents states, by settin the unstance variable <b>resize</b>. For documentation and examples see <a href="resize.html"><span class="s7">resize</span></a>.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p12"><br></p>
<p class="p6"><b>Actions: Performing Things with a GUI Widget</b></p>
<p class="p7"><br></p>
<p class="p5">Gui widgets typically have an <b>action</b>, which is a <a href="../Core/Kernel/Function.html"><span class="s6">Function</span></a> or <a href="../Core/Kernel/FunctionList.html"><span class="s6">FunctionList</span></a> to be evaluated when the user interacts with the widget.</p>
<p class="p5">You can set the <b>action</b>, or use <b>addAction</b>, or <b>removeAction</b> to determin how a widget interacts with your code.</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>w = </span><span class="s8">Window</span><span class="s1"> (</span>"A Slider"<span class="s1">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>a = <span class="s8">Slider</span> (w, <span class="s8">Rect</span>(40, 10, 300, 30));</p>
<p class="p11"><span class="Apple-tab-span">	</span>a.action={ <span class="s8">|sl|</span> sl.value.postln }; <span class="s12">// set the action of the slider</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>w.front</p>
<p class="p11"><span class="Apple-tab-span">	</span>);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// now incrementally add some more actions to the slider</p>
<p class="p11"><span class="Apple-tab-span">	</span>a.addAction({ <span class="s8">|sl|</span> w.view.background = <span class="s8">Color</span>.green(sl.value) });</p>
<p class="p11"><span class="Apple-tab-span">	</span>a.addAction({ <span class="s8">|sl|</span> sl.background = <span class="s8">Color</span>.red(1 - sl.value) });</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// adding and removing an action:</p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>f = { </span><span class="s8">|sl|</span><span class="s1"> </span>"--------*******-------"<span class="s1">.postln; };</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>a.addAction(f);</p>
<p class="p11"><span class="Apple-tab-span">	</span>a.removeAction(f);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// or remove all, of course</p>
<p class="p11"><span class="Apple-tab-span">	</span>a.action = <span class="s8">nil</span>;</p>
<p class="p12"><br></p>
<p class="p6"><b>Asynchronous GUI Techniques: Clocks</b></p>
<p class="p12"><br></p>
<p class="p14"><span class="s1">See: <a href="../Scheduling/AppClock.html"><span class="s13">AppClock</span></a>, <a href="../Scheduling/TempoClock.html"><span class="s13">TempoClock</span></a>, <a href="../Scheduling/SystemClock.html"><span class="s13">SystemClock</span></a></span></p>
<p class="p4"><br></p>
<p class="p5">Calls to the gui system from from the lang are asynchronous.</p>
<p class="p5">If you want to control a gui with a Routine or Task, then you must either use the <a href="../Scheduling/AppClock.html"><span class="s6">AppClock</span></a> to play them, or use the defer mechanism:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>w=<span class="s8">Window</span>.new.front;</p>
<p class="p15"><span class="s1"><span class="Apple-tab-span">	</span></span>Routine<span class="s1">{</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>20.do{</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.bounds=<span class="s8">Rect</span>(200.rand, 200+200.rand, 300,300);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.close;</p>
<p class="p11"><span class="Apple-tab-span">	</span>}.play(<span class="s8">AppClock</span>)</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span></p>
<p class="p5">The same thing using the defer mechanism and a <a href="../Scheduling/SystemClock.html"><span class="s14">SystemClock</span></a>:</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>w=<span class="s8">Window</span>.new.front;</p>
<p class="p15"><span class="s1"><span class="Apple-tab-span">	</span></span>Routine<span class="s1">{</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>20.do{</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{w.bounds=<span class="s8">Rect</span>(200.rand, 200+200.rand, 300,300) }.defer; <span class="s12">// you must defer this</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{w.close}.defer;<span class="Apple-converted-space">  </span></span>// you must defer this</p>
<p class="p15"><span class="s1"><span class="Apple-tab-span">	</span>}.play(</span>SystemClock<span class="s1">)</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p16"><br></p>
<p class="p5">In reality, <b>defer</b> simply forks a <a href="../Core/Kernel/Routine.html"><span class="s14">Routine</span></a> and plays it in an <a href="../Scheduling/AppClock.html"><span class="s14">AppClock</span></a>.</p>
<p class="p7"><br></p>
<p class="p6"><b>Asynchronous GUI Techniques: Communicating with the Sound Server</b></p>
<p class="p7"><br></p>
<p class="p5">Sending values from a gui object to the sound server is basically the same as sending from the lang.<span class="Apple-converted-space">  </span>Gui widgets typically have an <b>action</b>, which is a <a href="../Core/Kernel/Function.html"><span class="s6">Function</span></a> or <a href="../Core/Kernel/FunctionList.html"><span class="s6">FunctionList</span></a> to be evaluated when the user interacts with the widget.</p>
<p class="p4"><br></p>
<p class="p8">// change freqency<span class="Apple-converted-space">  </span>of a playing synth by step using arrow keys</p>
<p class="p17"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(<span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>n={<span class="s8">arg</span> freq=220;<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">var</span> out;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out=<span class="s8">SinOsc</span>.ar(freq,0,0.2);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>8.do{out = <span class="s8">AllpassN</span>.ar(out, 0.2,0.02+0.20.rand,8)};</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = </span><span class="s8">Window</span><span class="s1">(</span>"Use arrow keys<span class="Apple-converted-space">  </span>to change the frequency by steps"<span class="s1">, </span><span class="s8">Rect</span><span class="s1">(100, 500, 500, 120));</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="Apple-tab-span">	</span><span class="s8">NumberBox</span>(w, <span class="s8">Rect</span>(200, 10, 100, 20));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.value = 220;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.action = {</span><span class="s8">arg</span><span class="s1"> numb; n.set(</span><span class="s15">\freq</span><span class="s1">, numb.value); }; </span>// set the action here to change the frequency.</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.addAction ( {w.view.background = <span class="s8">Gradient</span>( <span class="s8">Color</span>.rand, <span class="s8">Color</span>.rand)}); <span class="s12">// add another action here.</span></p>
<p class="p2"><br></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.step=55; </span>//make the step a fraction of the freq</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.focus;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">CmdPeriod</span>.doOnce({w.close});</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p5">Recieving values, however is asynchronous, and requires either using an OSCresponderNode<span class="Apple-converted-space">  </span>or polling values.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">In this example a Routine polls values:</p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>w = <span class="s8">Window</span>(<span class="s9">"Frequency Monitor"</span>, <span class="s8">Rect</span>(200, <span class="s8">SCWindow</span>.screenBounds.height-200,300,150)).front;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>a = <span class="s8">StaticText</span>(w, <span class="s8">Rect</span>(45, 10, 200, 20)).background_(<span class="s8">Color</span>.rand);</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s1"><span class="Apple-tab-span">	</span>a.string = </span>"Current Frequency"<span class="s1">;</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s8">Button</span>.new(w, <span class="s8">Rect</span>(45, 70, 200, 20)).states_([[<span class="s9">"close"</span>,<span class="s8">Color</span>.black,<span class="s8">Color</span>.rand]]).action_({w.close});</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>q=<span class="s8">SynthDef</span>(<span class="s15">\Docs_FreqMonitor</span>, {<span class="s8">var</span> freq,snd;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>freq=<span class="s8">LFNoise0</span>.ar(2, 400, 650);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>snd=<span class="s8">SinOsc</span>.ar(freq,0,0.2);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Out</span>.ar(0,snd);</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s8">Out</span><span class="s1">.kr(0,freq); </span>// output the frequency to a control bus</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b=<span class="s8">Bus</span>.new.(<span class="s15">\control</span>,0,1);</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>r={<span class="Apple-converted-space"> </span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// set the value of the StaticText to the value in the control bus</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//setting GUI values is asynchronous, so you must use .defer in the system clock</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.get( {<span class="s8">arg</span> v; { a.string= <span class="s9">"<span class="Apple-converted-space">  </span>Current Frequency: "</span>++v.round(0.01) }.defer} );<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.01.wait;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.loop</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.fork</p>
<p class="p11"><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s8">CmdPeriod</span>.doOnce({w.close});</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span>w.onClose={q.free; r.stop;}; </span>//clean up if the window closes</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11">)</p>
<p class="p2"><br></p>
<p class="p5">Here an OSCreponder changes a gui. See <a href="../Control/OSCresponderNode.html"><span class="s14">OSCresponderNode</span></a> for more examples. It is important here that the action of the responder is defered.</p>
<p class="p4"><br></p>
<p class="p2"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w=<span class="s8">Window</span>.new.front;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>x={<span class="Apple-tab-span">	</span><span class="s8">var</span> d,arr,out;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>d = </span><span class="s8">Dust</span><span class="s1">.kr(2,0.2);<span class="Apple-tab-span">	</span></span>// generate triggers for SendTrig and for DynKlank</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s8">SendTrig</span><span class="s1">.kr(d, 0, 0.9); </span>// send message to lang</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>arr=<span class="s8">Array</span>.fill(4, {<span class="s8">TRand</span>.kr(50+500.rand,1200+1200.rand,d)});</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>out=<span class="s8">DynKlank</span>.ar(`[arr, <span class="s8">nil</span>, [1, 1, 1, 1]], <span class="s8">K2A</span>.ar(d)*0.1);<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Limiter</span>.ar(out,0.5)<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// register to receive this message</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s8">OSCresponderNode</span>(s.addr, <span class="s15">'/tr'</span>,<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{ {w.view.background = <span class="s8">Gradient</span>(<span class="s8">Color</span>.rand, <span class="s8">Color</span>.rand)}.defer<span class="Apple-converted-space">  </span>}).add; <span class="s12">// you must use defer here</span></p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s8">CmdPeriod</span><span class="s1">.doOnce({w.close}); </span>//close window when sound is stopped</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.onClose=({a.remove; x.free;});<span class="s12">// clean up</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="s16"><span class="Apple-tab-span">	</span></span>)</p>
<p class="p7"><br></p>
<p class="p6"><b>Custom GUI: designing your own widgets using UserView</b></p>
<p class="p7"><br></p>
<p class="p5">UserView is generally speaking a view in which you can draw, and for which you can define mouse, key, and drag and drop actions. For documentation on all of these, see the <a href="stubs/UserView.html"><span class="s10">UserView</span></a>, <a href="stubs/View.html"><span class="s10">View</span></a>, and <a href="stubs/Pen.html"><span class="s10">Pen</span></a> help files. The example below, however, will demonstrate a basic example of these techniques fo designing a widget. The steps you need to take are the following:</p>
<p class="p5">(<b>1) Create a User View (2) define a draw function (3) define an action (4) define mouse actions (5) define key actions (6) define drag and drop actions</b>.<span class="Apple-converted-space">  </span>You can omit steps which you don't want.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5">Caution, subclassing differs in may points form the example below. For a subclassing template and a quick tutorial on how to write a custom widget as a SCUserView subclass, see <a href="SCUserViewSubclassing/SCUserView Subclassing.html"><span class="s7">SCUserView Subclassing</span></a>.<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span></p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s8">var</span> value = 0.5;</p>
<p class="p11"><span class="Apple-tab-span">	</span>w = <span class="s8">Window</span>.new.front;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (1) create a user view</p>
<p class="p11"><span class="Apple-tab-span">	</span>v = <span class="s8">UserView</span>(w,<span class="s8">Rect</span>(50,50,200,20));<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (2) define a drawing function for Pen</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.drawFunc = {<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.addRect(v.bounds);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.fillAxialGradient(</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>((v.bounds.width*value)+10+v.bounds.left) @ v.bounds.top,</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>((v.bounds.width*value)-10+v.bounds.left) @ v.bounds.top,</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.grey(0.8),</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.grey(0.2));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.fill;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (3) set an action to the user view<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v.action = {value.postln; v.refresh};<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (4) define mouse actions</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.mouseDownAction = {<span class="s8">arg</span> view, x = 0.5,y, m;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m.postln;</p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(m == 256).if{ </span>// restrict to no modifier</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>value = (x).linlin(v.bounds.left,v.bounds.left+v.bounds.width,0,1); v.doAction}</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v.mouseMoveAction = v.mouseDownAction;</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (5) (optional) define key actions</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.keyDownAction = { <span class="s8">arg</span> view, char, modifiers, unicode,keycode;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF700, { value = (value+0.1).clip(0,1) });</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF703, { value = (value+0.1).clip(0,1) });</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF701, { value = (value-0.1).clip(0,1) });</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if (unicode == 16rF702, { value = (value-0.1).clip(0,1) });</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.doAction;</p>
<p class="p11"><span class="Apple-tab-span">	</span>};</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// (6) (optional) define drag and drop</p>
<p class="p11"><span class="Apple-tab-span">	</span>v.beginDragAction = {value}; <span class="s12">// what to drar</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v.canReceiveDragHandler = {<span class="s8">View</span>.currentDrag.isNumber}; <span class="s12">// what to receive</span></p>
<p class="p11"><span class="Apple-tab-span">	</span>v.receiveDragHandler = {value = <span class="s8">View</span>.currentDrag; v.doAction }; <span class="s12">// what to do on receiveing</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="s1"><span class="Apple-tab-span">	</span></span>// just for testing drag and drop</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="s8">Slider</span>(w,<span class="s8">Rect</span>(50,150,200,20));<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><br></p>
<p class="p6"><b>Automatic GUI</b></p>
<p class="p7"><br></p>
<p class="p5">You can get a quick simple automatic interface for a <a href="../ServerArchitecture/Synth.html"><span class="s17">Synth</span></a> with <a href="../ServerArchitecture/SynthDesc.html"><span class="s17">SynthDesc</span></a> : makeWindow.</p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>s.waitForBoot({</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">SynthDef</span>(<span class="s9">"test"</span>, { <span class="s8">arg</span> out, freq=330, amp=0.6;<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Out</span>.ar(out,<span class="Apple-converted-space">  </span><span class="s8">SinOsc</span>.ar(freq,0,amp))<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}).store;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">SynthDescLib</span>.global.at(<span class="s15">\test</span>).makeWindow;</p>
<p class="p11"><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p6"><b>Helper Methods in GUI</b></p>
<p class="p7"><br></p>
<p class="p5"><b>*stringBounds( string, font )</b></p>
<p class="p4"><br></p>
<p class="p5">Returns a Rect object describing the bounds occupied by the given string if it was painted using the given font. Note that this method is asynchronous in SwingOSC, hence it is advised to use it inside a Routine. Example:</p>
<p class="p4"><br></p>
<p class="p11"><span class="Apple-tab-span">	</span>(</p>
<p class="p11"><span class="Apple-tab-span">	</span>{</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">var</span> text = <span class="s9">"Test"</span>, bounds, font, fonts, rect = <span class="s8">Rect</span>.new, total = <span class="s8">Rect</span>.new;</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fonts = <span class="s8">GUI</span>.font.availableFonts;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s8">GUI</span>.window.new( <span class="s9">"String Bounds"</span>, resizable: <span class="s8">false</span> );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.view.background = <span class="s8">Color</span>.blue;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do({</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>font<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>= <span class="s8">GUI</span>.font.new( fonts.choose, exprand( 6, 36 ));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>bounds<span class="Apple-tab-span">	</span>= <span class="s8">GUI</span>.stringBounds( text, font );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>rect.set( rect.right, rect.bottom, bounds.width + 4, bounds.height + 2 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.staticText.new( w, rect )</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.font_( font ).align_( <span class="s15">\center</span> ).string_( text ).background_( <span class="s8">Color</span>.white );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>total<span class="Apple-tab-span">	</span>= total.union( rect );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.bounds = total.moveTo( 200, 200 );</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p11"><span class="Apple-tab-span">	</span>}.fork( <span class="s8">AppClock</span> );</p>
<p class="p11"><span class="Apple-tab-span">	</span>)</p>
<p class="p4"><br></p>
<p class="p6"><b>Browsers and Inspectors</b></p>
<p class="p4"><br></p>
<p class="p5">These classes use the current GUI kit implementation as returned by <span class="s18">GUI</span><span class="s19">.current</span> . You usually do not instantiate them directly, but use one of the "Plus-GUI" methods described in the next paragraph.</p>
<p class="p4"><br></p>
<p class="p5">ObjectInspector</p>
<p class="p5">StringInspector</p>
<p class="p5">ClassInspector</p>
<p class="p5">FunctionDefInspector</p>
<p class="p5">MethodInspector</p>
<p class="p5">SlotInspector</p>
<p class="p5">FrameInspector</p>
<p class="p4"><br></p>
<p class="p5">ClassBrowser</p>
<p class="p4"><br></p>
<p class="p7"><br></p>
<p class="p5">"Plus-GUI" methods are methods added to other classes such as <a href="../Collections/String.html"><span class="s20">String</span></a> or <a href="../ServerArchitecture/Server.html"><span class="s20">Server</span></a> that provide GUI functionality for those classes. These methods use the current GUI kit implementation as returned by <span class="s21">GUI</span><span class="s19">.current</span> .</p>
<p class="p4"><br></p>
<p class="p18">.inspect<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Inspectors:</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Server</span>.default.inspect;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Server</span>.inspect;</p>
<p class="p4"><br></p>
<p class="p19">.browse</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Browsers:</p>
<p class="p10"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span><span class="s8">UGen</span><span class="s1">.browse;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// ClassBrowser</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">SynthDescLib</span>( <span class="s15">\myLib</span> ).read.browse;</p>
<p class="p4"><br></p>
<p class="p19">.makeWindow</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Server:</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if( s.window.notNil, { s.window.close });</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.makeWindow;</p>
<p class="p18"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.scope;</p>
<p class="p4"><br></p>
<p class="p19">.plot</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Plotting:</p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>see <a href="../Collections/ArrayedCollection.html"><span class="s13">ArrayedCollection</span></a>, <a href="../ServerArchitecture/Buffer.html"><span class="s13">Buffer</span></a>, <a href="../Control/Env.html"><span class="s13">Env</span></a>, <a href="../Core/Kernel/Function.html"><span class="s13">Function</span></a>, <a href="../Collections/Signal.html"><span class="s13">Signal</span></a>, <a href="../Files/SoundFile.html"><span class="s13">SoundFile</span></a>, <a href="../Collections/Wavetable.html"><span class="s13">Wavetable</span></a></span></p>
<p class="p4"><br></p>
<p class="p19">.scope</p>
<p class="p5"><span class="Apple-tab-span">	</span>Examples for Scoping</p>
<p class="p14"><span class="s1"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>see <a href="../ServerArchitecture/Bus.html"><span class="s13">Bus</span></a>, <a href="../Core/Kernel/Function.html"><span class="s13">Function</span></a>, <a href="../ServerArchitecture/Server.html"><span class="s13">Server</span></a>, <a href="../UGens/UGen.html"><span class="s13">UGen</span></a></span><span class="s3">, <a href="stubs/ScopeView.html"><span class="s22">ScopeView</span></a>, <a href="stubs/Stethoscope.html"><span class="s22">Stethoscope</span></a></span></p>
<p class="p4"><br></p>
<p class="p7"><br></p>
</body>
</html>
