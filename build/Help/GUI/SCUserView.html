<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #001ee6}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; color: #000000; min-height: 17.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #3850cb}
span.s3 {color: #000000}
span.s4 {text-decoration: underline}
span.s5 {color: #6f717d}
span.s6 {color: #485abb}
span.s7 {font: 14.0px Helvetica}
span.s8 {color: #0000bf}
span.s9 {color: #007300}
span.s10 {color: #606060}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>SCUserView<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>user-definable view</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: </b><a href="../Core/Object.html"><span class="s2"><b>Object</b></span></a><b> : </b><a href="SCView.html"><span class="s2"><b>SCView</b></span></a></p>
<p class="p3"><br></p>
<p class="p1">SCUserView is a user-definable View intended mainly for use with Pen and drawHooks. It is also good for making custom buttons or other gui interfaces and displays. Thus anything you can draw with the methods of <a href="Pen.html"><span class="s2">Pen</span></a>, combined with mouse tracking, can be used to create a vast variety of interfaces and displays. <span class="Apple-converted-space">  </span>When a view is refreshed, either maunually, or triggered by a refresh of the parent view,<span class="Apple-converted-space">  </span>drawFunc is evaluated.<span class="Apple-converted-space">  </span>Using <b>refreshInRect </b>constrains the receiver's refresh area to the rectangle passed in aRect (see <a href="SCView.html"><span class="s2">SCView</span></a>).<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p4"><span class="s3"><b>See also:</b> <a href="SCWindow.html"><span class="s4">SCWindow</span></a>, <a href="Pen.html"><span class="s4">Pen</span></a>, <a href="Color.html"><span class="s4">Color</span></a>, and <a href="../Collections/String.html"><span class="s4">String</span></a></span></p>
<p class="p2"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*new (parent, bounds)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>-<span class="Apple-converted-space">  </span>The parent view.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="Geometry/Rect.html"><span class="s5">Rect</span></a>,<span class="Apple-converted-space">  </span>or<span class="Apple-converted-space">  </span>a <a href="Geometry/Point.html"><span class="s5">Point</span></a> indicating width@height.</p>
<p class="p6"><br></p>
<p class="p10"><b>Accessing Instance and Class Variables</b></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>relativeOrigin</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>relativeOrigin_ (bool)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>If set to true, child view <b>bounds</b> will be interpreted relative to the parents upper left corner. See the section on relativeOrigin under<span class="Apple-converted-space">  </span><a href="SCCompositeView.html"><span class="s6">SCCompositeView</span></a>.</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bool </b>- An instance of <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a>. Default value is false.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>drawFunc_(arg1)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>drawFunc</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Set the function which should be evaluated if the view is refreshed. This happens every time the view or the whole window is refreshed (manually by calling SCView:refresh, SCWindow:refresh or e.g. by selecting the view or resizing the window).<span class="Apple-converted-space"> </span></p>
<p class="p7">.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>arg1 </b>- An instance of <a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a>. Default value is nil.<span class="Apple-converted-space">  </span>Refreshing passes the instance of SCUserView itself as the first argument to the function.</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clearOnRefresh</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clearOnRefresh_ (bool)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Determines whether the drawn content of the view is cleared on refresh.<span class="Apple-converted-space"> </span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bool </b>- An instance of <a href="../Core/Boolean.html"><span class="s2">Boolean</span></a>. Default value is true.<span class="Apple-converted-space"> </span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousePosition</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns the relative position of the mouse cklick as a <a href="../Geometry/Point.html"><span class="s2">Point</span></a>.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>draw</b></p>
<p class="p8"><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Evaluates the draw function, passing the instance of SCUserView itself as the first argument to the function</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clearDrawing</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>If <b>clearOnRefresh</b> is set to false, then you can use this to manually clear the drawing (you must refesh in order for it to show)</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><b>Subclassing and Internal Methods<span class="Apple-converted-space"> </span></b></p>
<p class="p7"><span class="s7"><span class="Apple-tab-span">	</span></span>The following methods are usually not used directly or are called by a primitive. Programmers can still call or override these as needed.<span class="Apple-converted-space"> </span></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>init (argParent, argBounds)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span><b>parent </b>-<span class="Apple-converted-space">  </span>The parent view.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="Geometry/Rect.html"><span class="s5">Rect</span></a>,<span class="Apple-converted-space">  </span>or<span class="Apple-converted-space">  </span>a <a href="Geometry/Point.html"><span class="s5">Point</span></a> indicating width@height.</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>keyDownFunc</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>keyDownFunc_ (action)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Deprecated. Use <b>keyDownAction</b> instead. See <a href="SCView.html"><span class="s2">SCView</span></a>.</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseDownFunc</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseDownFunc_ (action)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Deprecated. Use <b>mouseDownAction</b> instead. See <a href="SCView.html"><span class="s2">SCView</span></a>.</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseMoveFunc</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseMoveFunc_ (action)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Deprecated. Use <b>mouseMoveAction</b> instead. See <a href="SCView.html"><span class="s2">SCView</span></a>.</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseUpFunc</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>mousemouseUpFunc_ (action)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Deprecated. Use <b>mouseUpAction</b> instead. See <a href="SCView.html"><span class="s2">SCView</span></a>.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><b>Examples</b></p>
<p class="p12"><br></p>
<p class="p13">// Basic Usage. Resize the window to refresh the drawing. Or use mouse click.</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p16"><span class="s3">w=</span>SCWindow<span class="s3">.new;</span></p>
<p class="p15">v=<span class="s8">SCUserView</span>(w, w.view.bounds.insetBy(50,50));</p>
<p class="p15">v.background_(<span class="s8">Color</span>.rand);</p>
<p class="p15">v.relativeOrigin=<span class="s8">true</span>;</p>
<p class="p15">v.drawFunc={<span class="s8">|uview|</span></p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.moveTo(0@uview.bounds.height.rand);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(uview.bounds.width@uview.bounds.height.rand);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.stroke;</p>
<p class="p15"><span class="Apple-tab-span">	</span>};</p>
<p class="p15">v.mouseDownAction={v.refresh};</p>
<p class="p15">w.front;</p>
<p class="p14"><br></p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// A More complicated drawing function.</p>
<p class="p13">// Resize the window to refresh the drawing</p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> func;</p>
<p class="p14"><br></p>
<p class="p15">func = {<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.use{</p>
<p class="p13"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// clipping into the boundingbox</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.moveTo((me.bounds.left)@(me.bounds.top));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (me.bounds.width@0));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (me.bounds.width@me.bounds.height));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (0@me.bounds.height));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo((me.bounds.left)@(me.bounds.top));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.clip;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// draw background</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.gray(0.5).set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.moveTo((me.bounds.left)@(me.bounds.top));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (me.bounds.width@0));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (me.bounds.width@me.bounds.height));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(((me.bounds.left)@(me.bounds.top))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ (0@me.bounds.height));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo((me.bounds.left)@(me.bounds.top));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.fill;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.translate(100, 100);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.red(rrand(0.0, 1), rrand(0.0, 0.5)).set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.addArc((400.exprand(2))@(100.rand), rrand(10, 100), 2pi.rand, pi);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.perform([<span class="s9">\stroke</span>, <span class="s9">\fill</span>].choose);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span>}</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p17"><span class="s3">w = </span><span class="s8">SCWindow</span><span class="s3">.new(</span>"DrawFunc Examples"<span class="s3">).front;</span></p>
<p class="p15">w.view.background_(<span class="s8">Color</span>.white);</p>
<p class="p15">3.do{<span class="s8">|i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>v = <span class="s8">SCUserView</span>(w, <span class="s8">Rect</span>(20+(i*120), 100, 100, 100));</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.drawFunc = func;</p>
<p class="p15">};</p>
<p class="p15">w.refresh;</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Use Relative Coordinates</p>
<p class="p13">// Set the Origin of Pen in the view's drawFunc relative to the SCUserView.</p>
<p class="p13">// This is particularly useful if resize is set in such a way the the position of the user view changes.</p>
<p class="p13">// Try resizing the Window.</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> func;</p>
<p class="p14"><br></p>
<p class="p15">func = {<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.use{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.red(rrand(0.0, 1), rrand(0.0, 0.5)).set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.addArc((400.exprand(2))@(100.rand), rrand(10, 100), 2pi.rand, pi);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.perform([<span class="s9">\stroke</span>, <span class="s9">\fill</span>].choose);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span>}</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p17"><span class="s3">w = </span><span class="s8">SCWindow</span><span class="s3">.new(</span>"DrawFunc Examples"<span class="s3">).front;</span></p>
<p class="p15">w.view.background_(<span class="s8">Color</span>.white);</p>
<p class="p14"><br></p>
<p class="p15">3.do{<span class="s8">|i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>v = <span class="s8">SCUserView</span>(w, <span class="s8">Rect</span>(20+(i*120), 100, 100, 100))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.drawFunc_(func).relativeOrigin_(<span class="s8">true</span>);</p>
<p class="p13"><span class="s3"><span class="Apple-tab-span">	</span>v.resize=3; </span>// the func coordinates ar valid even though the view move on resize</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.background_(<span class="s8">Color</span>.rand);</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p15">w.refresh;</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Mouse Tracking</p>
<p class="p13">// Set the function which should be evaluated if the mouse is at the end of tracking (mouse-up).<span class="Apple-converted-space"> </span></p>
<p class="p13">// This function will be passed four arguments: theView, x coordinate, y coordinate, and keyboard modifiers.</p>
<p class="p14"><span class="Apple-tab-span">	</span></p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> drawFunc, mouseDownFunc, mouseUpFunc, mouseMoveFunc, sat = 0, absX;</p>
<p class="p14"><br></p>
<p class="p15">drawFunc = {<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.use{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.red(rrand(0.0, 1), rrand(0.0, 0.5)).set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.addArc((400.exprand(2))@(100.rand), rrand(10, 100), 2pi.rand, pi);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.perform([<span class="s9">\stroke</span>, <span class="s9">\fill</span>].choose);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span>}</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p15">mouseDownFunc = {<span class="s8">|me, x, y, mod|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>absX = x;</p>
<p class="p17"><span class="s3"><span class="Apple-tab-span">	</span>postf(</span>"begin path: x=% realtive mousePosition:%\n"<span class="s3">,absX, me.mousePosition);</span></p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p15">mouseUpFunc = {<span class="s8">|me, x, y, mod|</span></p>
<p class="p17"><span class="s3"><span class="Apple-tab-span">	</span>postf(</span>"end path: (absX-x)==% realtive mousePosition:%\n"<span class="s3">,(absX-x), me.mousePosition);</span></p>
<p class="p14"><span class="Apple-tab-span">	</span></p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p15">mouseMoveFunc = {<span class="s8">|me, x, y, mod|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>sat = ((absX-x)/100);</p>
<p class="p15"><span class="Apple-tab-span">	</span>((me.mousePosition)/(me.bounds.width@me.bounds.height)).postln;</p>
<p class="p15"><span class="Apple-tab-span">	</span>me.refresh;</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p15">w = <span class="s8">SCWindow</span>.new.front;</p>
<p class="p15">w.view.background_(<span class="s8">Color</span>.white);</p>
<p class="p15">3.do{<span class="s8">|i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>v = <span class="s8">SCUserView</span>(w, <span class="s8">Rect</span>(20+(i*120), 100, 100, 100));</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.background_(<span class="s8">Color</span>.rand);</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.drawFunc = drawFunc;</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.mouseDownAction = mouseDownFunc;</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.mouseUpAction = mouseUpFunc;</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.mouseMoveAction = mouseMoveFunc;</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.relativeOrigin = <span class="s8">true</span>;</p>
<p class="p15">};</p>
<p class="p15">w.refresh;</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Use the mouse to draw on the view</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> w, txt, tmppoints, all;</p>
<p class="p15">tmppoints = [];</p>
<p class="p14"><br></p>
<p class="p15">w = <span class="s8">SCWindow</span>(<span class="s10">"draw on me"</span>, <span class="s8">Rect</span>(128, 64, 340, 360));</p>
<p class="p14"><br></p>
<p class="p15">v = <span class="s8">SCUserView</span>(w,w.view.bounds)</p>
<p class="p15"><span class="Apple-tab-span">	</span>.mouseMoveAction_({<span class="s8">|v,x,y|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[x,y].postln;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints = tmppoints.add(v.mousePosition);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.refresh;</p>
<p class="p15">})</p>
<p class="p15"><span class="Apple-tab-span">	</span>.mouseUpAction_({<span class="s8">|v,x,y|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>all = all.add(tmppoints.copy);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints = [];</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.refresh;</p>
<p class="p15">})</p>
<p class="p15"><span class="Apple-tab-span">	</span>.drawFunc_{<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.use {<span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.white.set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.fillRect(me.bounds.moveTo(0,0));<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.width = 1;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.black.set;</p>
<p class="p14"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.beginPath;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>tmppoints.do{<span class="Apple-tab-span">	</span><span class="s8">|p, i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(i == 0){</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.moveTo(p);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(p);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>all.do{<span class="s8">|points|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>points.do{<span class="s8">|p, i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(i == 0){</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.moveTo(p);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.lineTo(p);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.stroke;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span>};<span class="Apple-tab-span">	</span></p>
<p class="p15">v.relativeOrigin = <span class="s8">true</span>;</p>
<p class="p14"><span class="Apple-tab-span">	</span></p>
<p class="p15">w.front;</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Clearing on Refresh</p>
<p class="p13">//<span class="Apple-converted-space"> </span></p>
<p class="p13">// Set the behaviour for refreshing the view.<span class="Apple-converted-space"> </span></p>
<p class="p13">// If this flag is true (the default) the view will be cleared before each refresh call,</p>
<p class="p13">// otherwise It will draw in top of it.<span class="Apple-converted-space"> </span></p>
<p class="p13">// On OSX this functionality is only available for the version &gt;= 10.4<span class="Apple-converted-space">  </span>and with the flag relativeOrigin set to true.</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">var</span> width = 640, height = 480, w, theta = 0, drawFunc, gui;</p>
<p class="p15"><span class="Apple-tab-span">	</span>gui = <span class="s8">GUI</span>.get( <span class="s9">\cocoa</span> );</p>
<p class="p15"><span class="Apple-tab-span">	</span>w = gui.window.new( <span class="s10">"clearOnRefresh = true"</span>, <span class="s8">Rect</span>( 128, 64, width, height ), <span class="s8">false</span> );</p>
<p class="p15"><span class="Apple-tab-span">	</span>drawFunc = { <span class="s8">arg</span> view;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">var</span> x = 20 * sin( theta ), y = 42 * cos( theta );</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.addRect( view.bounds.moveTo( 0, 0 ));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.clip;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>theta = theta + 0.01;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.fillColor_( <span class="s8">Color</span>.red( 0.2, 0.1 ));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.fillRect( <span class="s8">Rect</span>( 0, 0, width, height ));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.strokeColor_( <span class="s8">Color</span>.white );</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.translate( width * 0.5, height * 0.5 );</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>6.do { <span class="s8">arg</span> i;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.rotate( theta * (1 - (i / 6)) );</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.scale( 0.7 + (i * 0.4), 0.4 + (i * 0.5) );</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>gui.pen.strokeOval( <span class="s8">Rect</span>.aboutPoint( <span class="s8">Point</span>( x, y ), 60, 40 ));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span>x = gui.userView.new( w, <span class="s8">Rect</span>( 10, 10, width - 20, height - 20 ))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.canFocus_( <span class="s8">false</span> )</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.drawFunc_( drawFunc )</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.clearOnRefresh_( <span class="s8">false</span> )</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.relativeOrigin_( <span class="s8">true</span> );</p>
<p class="p14"><br></p>
<p class="p15"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Routine</span>({ while({ x.isClosed.not }, { x.refresh; (1/25).wait })}).play( <span class="s8">AppClock</span> );</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">var</span> width= 640, height= 480, w, theta= 0, drawFunc;</p>
<p class="p15"><span class="Apple-tab-span">	</span>w= <span class="s8">GUI</span>.window.new(<span class="s10">"trail test3"</span>, <span class="s8">Rect</span>(128, 64, width, height), <span class="s8">false</span>);</p>
<p class="p15"><span class="Apple-tab-span">	</span>drawFunc= {<span class="s8">|v|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">var</span> x= 20*sin(theta), y= 42*cos(theta);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>theta= theta+0.01;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.fillColor_(<span class="s8">Color</span>.red(0.2, 0.1));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.fillRect(<span class="s8">Rect</span>(0, 0, width, height));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.strokeColor_(<span class="s8">Color</span>.white);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.push;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.translate(width*0.5, height*0.5);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>6.do{<span class="s8">|i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.rotate(theta*(1-(i/6)));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.scale(0.7+(i*0.4), 0.4+(i*0.5));</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.strokeOval(<span class="s8">Rect</span>.aboutPoint(<span class="s8">Point</span>(x, y), 60, 40))</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.pen.pop;</p>
<p class="p15"><span class="Apple-tab-span">	</span>};</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">GUI</span>.userView.new(w, <span class="s8">Rect</span>(10, 10, width-20, height-20)).drawFunc_(drawFunc).relativeOrigin_(<span class="s8">true</span>);</p>
<p class="p15"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Routine</span>({<span class="s8">inf</span>.do{<span class="s8">|i|</span> w.refresh; (1/25).wait}}).play(<span class="s8">AppClock</span>);</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Prevent redrawing:</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> func, views;</p>
<p class="p14"><br></p>
<p class="p15">func = {<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.use{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>10.do{</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.red(rrand(0.0, 1), rrand(0.0, 0.5)).set;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.addArc((400.exprand(2))@(100.rand), rrand(10, 100), 2pi.rand, pi);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.perform([<span class="s9">\stroke</span>, <span class="s9">\fill</span>].choose);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}</p>
<p class="p15"><span class="Apple-tab-span">	</span>}</p>
<p class="p15">};</p>
<p class="p14"><br></p>
<p class="p17"><span class="s3">w = </span><span class="s8">SCWindow</span><span class="s3">.new(</span>"DrawFunc Examples"<span class="s3">).front;</span></p>
<p class="p15">w.view.background_(<span class="s8">Color</span>.white);</p>
<p class="p15">views = {<span class="s8">|i|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span>v = <span class="s8">SCUserView</span>(w, <span class="s8">Rect</span>(20+(i*120), 100, 100, 100)).relativeOrigin_(<span class="s8">true</span>);</p>
<p class="p15"><span class="Apple-tab-span">	</span>v.drawFunc = func;</p>
<p class="p15">} ! 3;</p>
<p class="p15">w.refresh;</p>
<p class="p15">{views.do{<span class="s8">|v|</span> v.clearOnRefresh_(<span class="s8">false</span>);v.drawFunc = <span class="s8">nil</span>}}.defer(0.4);</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p14"><br></p>
<p class="p13">// Use refreshInRect(aRect).</p>
<p class="p13">// Constrains the receiver's refresh area to the rectangle passed in aRect.</p>
<p class="p13">// you may use Quartz Debug's flash screen updates to see the refresh area of the view</p>
<p class="p14"><br></p>
<p class="p15">(</p>
<p class="p15"><span class="s8">var</span> userView, win, blob = <span class="s8">Rect</span>(0, 0, 50, 50), trackblob=<span class="s8">false</span>, pmouse;</p>
<p class="p14"><br></p>
<p class="p17"><span class="s3">a = </span><span class="s8">SCImage</span><span class="s3">.new(</span>"/Library/Desktop Pictures/Ripples Blue.jpg"<span class="s3">);</span></p>
<p class="p14"><br></p>
<p class="p15">win = <span class="s8">SCWindow</span>.new(<span class="s10">"refreshInRect Test"</span>, <span class="s8">Rect</span>(400, 400, 600, 200), scroll:<span class="s8">true</span>).front;</p>
<p class="p15">win.onClose_({ a.free; });</p>
<p class="p14"><span class="Apple-converted-space"> </span></p>
<p class="p15">userView = <span class="s8">SCUserView</span>(win, <span class="s8">Rect</span>(10,10,2000,800))</p>
<p class="p15"><span class="Apple-tab-span">	</span>.backgroundImage_(a, 5)</p>
<p class="p15"><span class="Apple-tab-span">	</span>.relativeOrigin_(<span class="s8">false</span>)</p>
<p class="p15"><span class="Apple-tab-span">	</span>.drawFunc_({<span class="s8">|me|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Color</span>.blue.setFill;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">Pen</span>.fillRect(blob);</p>
<p class="p15"><span class="Apple-tab-span">	</span>})</p>
<p class="p15"><span class="Apple-tab-span">	</span>.mouseDownAction_({<span class="s8">|v, x, y, mod|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pmouse = x@y;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>trackblob = blob.containsPoint(pmouse);</p>
<p class="p15"><span class="Apple-tab-span">	</span>})</p>
<p class="p15"><span class="Apple-tab-span">	</span>.mouseUpAction_({<span class="s8">|v, x, y, mod|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>trackblob = <span class="s8">false</span>;</p>
<p class="p15"><span class="Apple-tab-span">	</span>})</p>
<p class="p15"><span class="Apple-tab-span">	</span>.mouseMoveAction_({<span class="s8">|v, x, y, mod|</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s8">var</span> refresh, mouse, delta;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>mouse = x@y;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(trackblob, {</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>refresh = blob.copy;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>delta = mouse-pmouse;</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>blob = blob.moveBy(delta.x, delta.y);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>refresh = refresh.union(blob);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>v.refreshInRect(refresh);</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>pmouse = mouse;</p>
<p class="p15"><span class="Apple-tab-span">	</span>});</p>
<p class="p14"><br></p>
<p class="p15">blob = blob.moveBy(userView.bounds.left, userView.bounds.top);</p>
<p class="p15">userView.bounds.postln;</p>
<p class="p15">)</p>
<p class="p14"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p3"><br></p>
</body>
</html>
