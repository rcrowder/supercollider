<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.43">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p3 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p5 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p6 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #7b2c20}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a41c14}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #a41c14}
p.p15 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #606060}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #0018b8}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
span.s1 {color: #6f7178}
span.s2 {color: #1129ac}
span.s3 {color: #7b2c20}
span.s4 {color: #000000}
span.s5 {color: #0018b8}
span.s6 {color: #a41c14}
span.s7 {color: #606060}
span.s8 {color: #356f14}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><br></p>
<p class="p2"><b>Creation / Class Methods</b></p>
<p class="p3"><br></p>
<p class="p4"><b><span class="Apple-tab-span">	</span>*new (parent, bounds)</b></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>- The parent view.</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="../../../Geometry/Rect.html"><span class="s1">Rect</span></a>, or a <a href="../../../Geometry/Point.html"><span class="s1">Point</span></a> indicating width@height.</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>n=20;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s2">Window</span>.new.front;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m = <span class="s2">MultiSliderView</span>(w,<span class="s2">Rect</span>(10,10,n*13+2,100)); <span class="s3">//default thumbWidth is 13</span></p>
<p class="p9"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m.value=</span><span class="s2">Array</span><span class="s4">.fill(n, {</span><span class="s2">|v|</span><span class="s4"> v*0.05}); </span>// size is set automatically when you set the value</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>m.action = { <span class="s2">arg</span> q;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>q.value.postln;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p5"><br></p>
<p class="p3"><br></p>
<p class="p10"><b>Examples</b></p>
<p class="p11"><br></p>
<p class="p12">// basic</p>
<p class="p8">(</p>
<p class="p8">n=20;</p>
<p class="p8">w = <span class="s5">Window</span>.new.front;</p>
<p class="p8">m = <span class="s5">MultiSliderView</span>(w,<span class="s5">Rect</span>(10,10,n*13+2,100)); <span class="s6">//default thumbWidth is 13</span></p>
<p class="p12"><span class="s4">m.value=</span><span class="s5">Array</span><span class="s4">.fill(n, {</span><span class="s5">|v|</span><span class="s4"> v*0.05}); </span>// size is set automatically when you set the value</p>
<p class="p8">m.action = { <span class="s5">arg</span> q;</p>
<p class="p8"><span class="Apple-tab-span">	</span>q.value.postln;</p>
<p class="p8">};</p>
<p class="p8">)<span class="Apple-tab-span">	</span></p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p12">// looks like a candlestick graph</p>
<p class="p8">(</p>
<p class="p8"><span class="s5">var</span> size;</p>
<p class="p8">size = 350 / 6;</p>
<p class="p8">w = <span class="s5">Window</span>.new;</p>
<p class="p8">w.view.decorator = <span class="s5">FlowLayout</span>(w.view.bounds);</p>
<p class="p8">m = <span class="s5">MultiSliderView</span>(w, <span class="s5">Rect</span>(0, 0, 350, 100));<span class="Apple-tab-span">	</span></p>
<p class="p8">m.value_(<span class="s5">Array</span>.fill(size, {0.01}));</p>
<p class="p12"><span class="s4">m.isFilled_(</span><span class="s5">true</span><span class="s4">); </span>// width in pixels of each stick</p>
<p class="p12"><span class="s4">m.indexThumbSize_(2.0); </span>// spacing on the value axis</p>
<p class="p8">m.gap_(4);</p>
<p class="p8">w.front;</p>
<p class="p8">)</p>
<p class="p11"><br></p>
<p class="p12">// rotate the above graph</p>
<p class="p8">(</p>
<p class="p8">m.bounds_(<span class="s5">Rect</span>(0, 0, 100, 350));</p>
<p class="p8">m.indexIsHorizontal_(<span class="s5">false</span>);</p>
<p class="p8">)</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p10"><b>Interactive Example (explains all the graphic options)</b></p>
<p class="p11"><br></p>
<p class="p13">(</p>
<p class="p13">n=40;</p>
<p class="p3"><br></p>
<p class="p13">w = <span class="s5">Window</span>(<span class="s7">"MultiSlider Options"</span>, <span class="s5">Rect</span>(200, <span class="s5">Window</span>.screenBounds.height-550, 600, 450));</p>
<p class="p13">f={<span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="Apple-tab-span">	</span>w.view.decorator = <span class="s5">FlowLayout</span>( w.view.bounds, 10@10, 10@2 );</p>
<p class="p14"><span class="s4"><span class="Apple-tab-span">	</span>m = </span><span class="s5">MultiSliderView</span><span class="s4">(w,</span><span class="s5">Rect</span><span class="s4">(0,0,580,200)); </span>// default thumbWidth is 13</p>
<p class="p13"><span class="Apple-tab-span">	</span>m.value=<span class="s5">Array</span>.fill(n, {<span class="s5">|v|</span> 0.5+((0.3*v).sin*0.25)});</p>
<p class="p13"><span class="Apple-tab-span">	</span>m.action = { <span class="s5">arg</span> q;q.value.postln; };</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">StaticText</span><span class="s4">(w,380@18).string_(</span>"indexThumbSize or thumbSize"<span class="s4">);</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Slider</span>(w,580@10).action_({<span class="s5">arg</span> sl; m.indexThumbSize=sl.value*24}).value_(0.5);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">StaticText</span>(w,380@18).string_(<span class="s7">"valueThumbSize"</span>);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Slider</span>(w,580@10).action_({<span class="s5">arg</span> sl; m.valueThumbSize=sl.value*24}).value_(0.5);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">StaticText</span>(w,580@18).string_(<span class="s7">"xOffset or gap"</span>);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Slider</span>(w,580@10).action_({<span class="s5">arg</span> sl;0.5- m.xOffset=sl.value*50});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">StaticText</span><span class="s4">(w,580@18).string_(</span>"setProperty(\\startIndex)"<span class="s4">);</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Slider</span>(w,580@10).action_({<span class="s5">arg</span> sl; m.setProperty(<span class="s8">\startIndex</span>, sl.value *m.size )};);</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p16"><span class="s4"><span class="Apple-tab-span">	</span></span>CompositeView<span class="s4">(w,580@10);</span><span class="s6">//spacer</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,100@20).states_([[<span class="s7">"RESET"</span>,<span class="s5">Color</span>.red]])</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ w.view.removeAll; f.value; });</p>
<p class="p13"><span class="Apple-tab-span">	</span>h=<span class="s5">StaticText</span>(w,450@18).string_(<span class="s7">""</span>).stringColor_(<span class="s5">Color</span>.yellow);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,100@20).states_([[<span class="s7">"elasticMode = 0"</span>],[<span class="s7">"elasticMode = 1"</span>,<span class="s5">Color</span>.white]])</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.elasticMode = b.value});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">Button</span><span class="s4">(w,160@20).states_([[</span>"indexIsHorizontal = false"<span class="s4">],[</span>"indexIsHorizontal = true"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.white]])</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.indexIsHorizontal = b.value.booleanValue}).value_(1);</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,120@20).states_([[<span class="s7">"isFilled = false"</span>],[<span class="s7">"isFilled = true"</span>,<span class="s5">Color</span>.white]])</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.isFilled = b.value.booleanValue});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">Button</span><span class="s4">(w,120@20).states_([[</span>"drawRects = false"<span class="s4">],[</span>"drawRects = true"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.white]])</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.drawRects = b.value.booleanValue}).valueAction_(1);</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">Button</span><span class="s4">(w,100@20).states_([[</span>"drawLines = false"<span class="s4">],[</span>"drawLines = true"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.white]])</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.drawLines = b.value.booleanValue});</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,160@20).states_([[<span class="s7">"readOnly = false"</span>],[<span class="s7">"readOnly = true"</span>,<span class="s5">Color</span>.white]])</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.readOnly = b.value.booleanValue});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">Button</span><span class="s4">(w,120@20).states_([[</span>"showIndex = false"<span class="s4">],[</span>"showIndex = true"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.white]])</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> m.showIndex = b.value.booleanValue});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span></span><span class="s5">Button</span><span class="s4">(w,120@20).states_([[</span>"reference = nil"<span class="s4">],[</span>"reference filled"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.white],[</span>"reference random"<span class="s4">,</span><span class="s5">Color</span><span class="s4">.yellow]])</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({<span class="s5">|b|</span> b.value.booleanValue.if({</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(b.value&gt;1).if(</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{m.reference=<span class="s5">Array</span>.fill(n, {1.0.rand})},</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{m.reference=<span class="s5">Array</span>.fill(m.size, {0.5})});</p>
<p class="p15"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>},{ q=m.value;m.reference=[]; h.string=</span>"reference can't be returned to nil presently. please hit RESET."<span class="s4">}</span></p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,180@20).states_([[<span class="s7">"fillColor = Color.rand"</span>]]).action_({m.fillColor=<span class="s5">Color</span>.rand});</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,180@20).states_([[<span class="s7">"strokeColor = Color.rand"</span>]]).action_({m.strokeColor=<span class="s5">Color</span>.rand});</p>
<p class="p13"><span class="Apple-tab-span">	</span><span class="s5">Button</span>(w,180@20).states_([[<span class="s7">"background = Color.rand"</span>]]).action_({m.background=<span class="s5">Color</span>.rand});</p>
<p class="p3"><span class="Apple-tab-span">	</span></p>
<p class="p13">};</p>
<p class="p13">f.value;</p>
<p class="p13">w.front;</p>
<p class="p3"><br></p>
<p class="p13">)</p>
<p class="p3"><br></p>
<p class="p3"><br></p>
<p class="p10"><b>Load a Sound file</b></p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p8">(</p>
<p class="p12">// press shift to extend the selection</p>
<p class="p12">// use as waveView: scrubbing over the view returns index</p>
<p class="p12">// if showIndex(false) the view is not refreshed (faster);</p>
<p class="p12">// otherwise you can make a selection with shift - drag.</p>
<p class="p8"><span class="s5">var</span> size, file, maxval, minval;</p>
<p class="p8">size = 640;</p>
<p class="p8">a = <span class="s5">Window</span>(<span class="s7">"test"</span>, <span class="s5">Rect</span>(200 , 140, 650, 150));</p>
<p class="p8">a.view.decorator = <span class="s5">FlowLayout</span>(a.view.bounds);</p>
<p class="p8">b = <span class="s5">MultiSliderView</span>(a, <span class="s5">Rect</span>(0, 0, size, 50));</p>
<p class="p8">b.readOnly_(<span class="s5">true</span>);</p>
<p class="p8">a.view.decorator.nextLine;</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p8">d = <span class="s5">Array</span>.new;</p>
<p class="p8">c = <span class="s5">FloatArray</span>.newClear(65493);</p>
<p class="p11"><br></p>
<p class="p8">r = <span class="s5">Slider</span>( a, <span class="s5">Rect</span>(0, 0, size, 12));</p>
<p class="p8">r.action = {<span class="s5">arg</span> ex; b.setProperty(<span class="s8">\xOffset</span>, (ex.value * 4) + 1 )};</p>
<p class="p11"><br></p>
<p class="p8">file = <span class="s5">SoundFile</span>.new;</p>
<p class="p17"><span class="s4">file.openRead(</span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p8">file.numFrames.postln;</p>
<p class="p8">file.readData(c);</p>
<p class="p12">// file.inspect;</p>
<p class="p8">file.close;</p>
<p class="p8">minval = 0;</p>
<p class="p8">maxval = 0;</p>
<p class="p8">f = <span class="s5">Array</span>.new;</p>
<p class="p8">d = <span class="s5">Array</span>.new;</p>
<p class="p8">c.do({<span class="s5">arg</span> fi, i;</p>
<p class="p8"><span class="Apple-tab-span">	</span>if(fi &lt; minval, {minval = fi});</p>
<p class="p8"><span class="Apple-tab-span">	</span>if(fi &gt; maxval, {maxval = fi});</p>
<p class="p11"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>//f.postln;</p>
<p class="p8"><span class="Apple-tab-span">	</span>if(i % 256 == 0,{</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>d = d.add((1 + maxval ) * 0.5 );</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>f = f.add((1 + minval ) * 0.5 );</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>minval = 0;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>maxval = 0;</p>
<p class="p8"><span class="Apple-tab-span">	</span>});</p>
<p class="p8">});</p>
<p class="p11"><br></p>
<p class="p12"><span class="s4">b.reference_(d); </span>// this is used to draw the upper part of the table</p>
<p class="p8">b.value_(f);</p>
<p class="p11"><br></p>
<p class="p8">r = <span class="s5">Slider</span>( a, <span class="s5">Rect</span>(0, 0, size, 12));</p>
<p class="p8">r.action = {<span class="s5">arg</span> ex; b.setProperty(<span class="s8">\startIndex</span>, ex.value *f.size )};</p>
<p class="p11"><br></p>
<p class="p12">// b.enabled_(false);</p>
<p class="p8">b.action = {<span class="s5">arg</span> xb; (<span class="s7">"index: "</span> ++ xb.index).postln};</p>
<p class="p8">b.drawLines_(<span class="s5">true</span>);</p>
<p class="p8">b.drawRects_(<span class="s5">false</span>);</p>
<p class="p8">b.isFilled_(<span class="s5">true</span>);</p>
<p class="p8">b.selectionSize_(10);</p>
<p class="p8">b.index_(10);</p>
<p class="p8">b.thumbSize_(1);</p>
<p class="p8">b.gap_(0);</p>
<p class="p8">b.colors_(<span class="s5">Color</span>.black, <span class="s5">Color</span>.blue(1.0,1.0));</p>
<p class="p8">b.showIndex_(<span class="s5">true</span>);</p>
<p class="p8">a.front;</p>
<p class="p11"><br></p>
<p class="p8">)</p>
<p class="p11"><br></p>
<p class="p18"><b>Use as Sequencer</b></p>
<p class="p1"><br></p>
<p class="p12">// example with sound</p>
<p class="p8">(</p>
<p class="p8"><span class="s5">var</span> size;</p>
<p class="p8">size = 12;</p>
<p class="p8">s.waitForBoot{<span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span>n={<span class="s5">arg</span> freq=330; <span class="s5">SinOsc</span>.ar(freq,0,0.2)}.play;</p>
<p class="p11"><br></p>
<p class="p8"><span class="Apple-tab-span">	</span>w = <span class="s5">Window</span>(<span class="s7">"test"</span>, <span class="s5">Rect</span>(200 , 450, 10 + (size * 17), 10 + (size * 17)));</p>
<p class="p8"><span class="Apple-tab-span">	</span>w.view.decorator = <span class="s5">FlowLayout</span>(w.view.bounds);</p>
<p class="p8"><span class="Apple-tab-span">	</span>b = <span class="s5">MultiSliderView</span>(w, <span class="s5">Rect</span>(0, 0, size * 17, size * 17));</p>
<p class="p8"><span class="Apple-tab-span">	</span>b.value_( <span class="s5">Array</span>.fill(size,{<span class="s5">|i|</span> i/size}) );</p>
<p class="p8"><span class="Apple-tab-span">	</span>b.background_(<span class="s5">Color</span>.rand);</p>
<p class="p8"><span class="Apple-tab-span">	</span>b.action = {<span class="s5">arg</span> xb;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>n.set(<span class="s8">\freq</span>, 330+(1100*xb.value.at(xb.index)));</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(<span class="s7">"index: "</span> ++ xb.index ++<span class="s7">" value: "</span> ++ xb.value.at(xb.index)).postln};</p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span>b.elasticMode_(1); </span>// makes the squares fit evenly</p>
<p class="p8"><span class="Apple-tab-span">	</span>b.setProperty(<span class="s8">\showIndex</span>, <span class="s5">true</span>); <span class="s6">// cursor mode</span></p>
<p class="p8"><span class="Apple-tab-span">	</span>b.readOnly=<span class="s5">true</span>;</p>
<p class="p8"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span>r = <span class="s5">Routine</span>({</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>30.do({ <span class="s5">arg</span> i;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.index_(i%size);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.doAction;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.1.wait;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>20.do({ <span class="s5">arg</span> i;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.index_(b.size.rand);</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.doAction;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[0.1,0.2].choose.wait;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1.wait;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>n.free;</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{w.close}.defer;</p>
<p class="p8"><span class="Apple-tab-span">	</span>});</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="s5">AppClock</span>.play(r);</p>
<p class="p8">};</p>
<p class="p8">)</p>
<p class="p8">Note: <span class="s5">this</span> forces the entire view to redraw at each step and will spend a lot of <span class="s5">CPU</span>.</p>
<p class="p11"><br></p>
<p class="p3"><br></p>
<p class="p11"><br></p>
</body>
</html>
