<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.43">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #606060}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a41c14}
span.s1 {color: #6f7178}
span.s2 {color: #0922b2}
span.s3 {color: #606060}
span.s4 {color: #000000}
span.s5 {color: #0018b8}
span.s6 {color: #a41c14}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>Creation / Class Methods</b></p>
<p class="p2"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>*new (parent, bounds)</b></p>
<p class="p4"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>- The parent view.</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="../../../Geometry/Rect.html"><span class="s1">Rect</span></a>, or a <a href="../../../Geometry/Point.html"><span class="s1">Point</span></a> indicating width@height.</p>
<p class="p2"><br></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s2">Window</span>.new(<span class="s3">"soundfile test"</span>, <span class="s2">Rect</span>(200, 200, 850, 400));</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="s2">SoundFileView</span>.new(w, <span class="s2">Rect</span>(20,20, 700, 60));</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>f = <span class="s2">SoundFile</span>.new;</p>
<p class="p7"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>f.openRead(</span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a.soundfile = f;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a.read(0, f.numFrames);</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p2"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b>Examples</b></p>
<p class="p9"><br></p>
<p class="p10">(</p>
<p class="p10">w = <span class="s5">Window</span>.new(<span class="s3">"soundfile test"</span>, <span class="s5">Rect</span>(200, 200, 800, 400));</p>
<p class="p10">a = <span class="s5">SoundFileView</span>.new(w, <span class="s5">Rect</span>(20,20, 700, 60));</p>
<p class="p9"><br></p>
<p class="p10">f = <span class="s5">SoundFile</span>.new;</p>
<p class="p11"><span class="s4">f.openRead(</span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p10">f.inspect;</p>
<p class="p9"><br></p>
<p class="p10">a.soundfile = f;</p>
<p class="p10">a.read(0, f.numFrames);</p>
<p class="p10">a.elasticMode = <span class="s5">true</span>;</p>
<p class="p9"><br></p>
<p class="p10">a.timeCursorOn = <span class="s5">true</span>;</p>
<p class="p10">a.timeCursorColor = <span class="s5">Color</span>.red;</p>
<p class="p10">a.timeCursorPosition = 2050;</p>
<p class="p10">a.drawsWaveForm = <span class="s5">true</span>;</p>
<p class="p10">a.gridOn = <span class="s5">true</span>;</p>
<p class="p10">a.gridResolution = 0.2;</p>
<p class="p9"><br></p>
<p class="p10">w.front;</p>
<p class="p10">)</p>
<p class="p9"><br></p>
<p class="p12">// step by step examples:</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4">( </span>// make a simple SoundFileView</p>
<p class="p10">w = <span class="s5">Window</span>.new(<span class="s3">"soundfile test"</span>, <span class="s5">Rect</span>(10, 700, 750, 100));</p>
<p class="p10">w.front;</p>
<p class="p10">a = <span class="s5">SoundFileView</span>.new(w, <span class="s5">Rect</span>(20,20, 700, 60));</p>
<p class="p9"><br></p>
<p class="p10">f = <span class="s5">SoundFile</span>.new;</p>
<p class="p11"><span class="s4">f.openRead(</span>"sounds/a11wlk01.wav"<span class="s4">);</span></p>
<p class="p12">// f.inspect;</p>
<p class="p9"><br></p>
<p class="p10">a.soundfile = f;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// set soundfile</span></p>
<p class="p12"><span class="s4">a.read(0, f.numFrames);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// read in the entire file.</p>
<p class="p12"><span class="s4">a.refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// refresh to display the file.</p>
<p class="p10">)</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// reading file</p>
<p class="p10">a.read(0, f.numFrames / 2).refresh;<span class="Apple-tab-span">	</span><span class="s6">// read first half</span></p>
<p class="p12"><span class="s4">a.read.refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// read entire file by default</p>
<p class="p10">a.read(f.numFrames / 2).refresh; <span class="Apple-tab-span">	</span><span class="s6">// read second half</span></p>
<p class="p12"><span class="s4">a.read(0, -1).refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// -1 also reads entire file, like buffer.</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// block sets visual resolution of waveform, default is 64.</p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// i.e. the view keeps peak values for each block of e.g. 64 samples</p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// rather than the entire waveform.</p>
<p class="p10">a.read(0, -1, block: 32).refresh;</p>
<p class="p10">a.read(0, -1, block: 24).refresh;</p>
<p class="p10">a.read(0, -1, block: 16).refresh;</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// for longer files, you can use:</p>
<p class="p10">a.readWithTask;</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// zoom is relative</p>
<p class="p10">a.zoom(0.2).refresh;</p>
<p class="p10">a.zoom(2).refresh;</p>
<p class="p10">a.zoom(2).refresh;</p>
<p class="p12"><span class="s4">a.zoomToFrac(0.5); </span>// zoom to half file size</p>
<p class="p10">a.zoomAllOut;</p>
<p class="p9"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="s4">a.gridOn = </span><span class="s5">true</span><span class="s4">;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// time grid, 1 second by default,</p>
<p class="p12"><span class="s4">a.gridResolution = 0.2;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// or set resolution in seconds</p>
<p class="p12"><span class="s4">a.gridColor = </span><span class="s5">Color</span><span class="s4">.cyan;<span class="Apple-tab-span">	</span></span>// color is changeable.</p>
<p class="p12"><span class="s4">a.gridOffset_(0.1);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// not sure if this is working?</p>
<p class="p9"><br></p>
<p class="p10">a.timeCursorOn = <span class="s5">true</span>;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// a settable cursor</span></p>
<p class="p10">a.timeCursorPosition = 2050;<span class="Apple-tab-span">	</span><span class="s6">// position is in frames.</span></p>
<p class="p10">a.timeCursorColor = <span class="s5">Color</span>.white;<span class="Apple-tab-span">	</span></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// toggle drawing on/off</p>
<p class="p10">a.drawsWaveForm = <span class="s5">false</span>;</p>
<p class="p10">a.drawsWaveForm = <span class="s5">true</span>;</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// these methods should return view properties:</p>
<p class="p10">a.gridOn</p>
<p class="p10">a.gridResolution</p>
<p class="p10">a.gridColor</p>
<p class="p10">a.timeCursorOn</p>
<p class="p10">a.timeCursorPosition</p>
<p class="p10">a.timeCursorColor</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// Selections: multiple selections are supported.</p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// e.g. use selection 0:</p>
<p class="p10">a.setSelectionColor(0, <span class="s5">Color</span>.red);<span class="Apple-tab-span">	</span><span class="s6">// set...( index, value )</span></p>
<p class="p10">a.selectionStart(0);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// at index</span></p>
<p class="p10">a.setSelectionStart(0, 12345);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10">a.setSelectionSize(0, 12345);</p>
<p class="p9"><br></p>
<p class="p10">a.setSelectionStart(0, 1234);</p>
<p class="p10">a.selectionStart(0);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// now selection 1</p>
<p class="p10">a.setSelectionColor(1, <span class="s5">Color</span>.white);</p>
<p class="p10">a.setSelectionStart(1, 1234).setSelectionSize(1, 1234 * 2);</p>
<p class="p10">a.selectionStart(1);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p10">a.setSelectionStart(0, 12345);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// the current selection gets changed when click/dragging in view.</p>
<p class="p12"><span class="s4">a.currentSelection;<span class="Apple-tab-span">	</span></span>// index of current selection;</p>
<p class="p12"><span class="s4">a.currentSelection_(1);<span class="Apple-tab-span">	</span></span>// switch current selection - try click/drag white now.</p>
<p class="p10">a.currentSelection;</p>
<p class="p9"><br></p>
<p class="p10">a.selections.size;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">// 64 selections</span></p>
<p class="p10">a.selections[0];</p>
<p class="p10">a.selections[1];</p>
<p class="p10">a.selections;</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// setSelection (index, selection);</p>
<p class="p10">a.setSelection(0, [234, 2345]);</p>
<p class="p12"><span class="s4">a.selection(1);<span class="Apple-tab-span">	</span></span>// returns [start, size].</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4">a.elasticMode = </span><span class="s5">true</span><span class="s4">;<span class="Apple-tab-span">	</span></span>// not sure if this is working yet?</p>
<p class="p9"><br></p>
<p class="p12"><span class="s4">(<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// mouseUpAction</p>
<p class="p10">a.mouseUpAction = {</p>
<p class="p11"><span class="s4"><span class="Apple-tab-span">	</span>(</span>"mouseUp, current selection is now:"</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>+ a.selections[a.currentSelection]).postln;</p>
<p class="p10">};</p>
<p class="p10">)</p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// lock selection 0:</p>
<p class="p10">a.currentSelection_(0);</p>
<p class="p10">a.setEditableSelectionStart(0, <span class="s5">false</span>);</p>
<p class="p10">a.setEditableSelectionSize(0, <span class="s5">false</span>);</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4"><span class="Apple-tab-span">	</span></span>// unlock selection 0:</p>
<p class="p10">a.setEditableSelectionStart(0, <span class="s5">true</span>);</p>
<p class="p10">a.setEditableSelectionSize(0, <span class="s5">true</span>);</p>
<p class="p9"><br></p>
<p class="p10">a.selectionStartTime(0);</p>
<p class="p10">a.selectionDuration(0);</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p10">a.setSelectionStart(0, 12345);</p>
<p class="p10">a.setSelectionSize(0, 12345);</p>
<p class="p10">a.readSelection.refresh;</p>
<p class="p10">a.readSelection(16).refresh;<span class="Apple-tab-span">	</span><span class="s6">// in higher resolution</span></p>
<p class="p12"><span class="s4">a.read.refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// go back to entire file.</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4">a.dataNumSamples;<span class="Apple-tab-span">	</span></span>// visual data have this many points</p>
<p class="p10">a.data.plot;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p10">a.setData(a.data.reverse);</p>
<p class="p9"><br></p>
<p class="p9"><br></p>
<p class="p12"><span class="s4">a.zoom(0.25);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scrolling is normalized</p>
<p class="p10">a.scrollTo(0.5);<span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p10">a.scrollTo(0.6);<span class="Apple-tab-span">	</span><span class="s6">//</span></p>
<p class="p12"><span class="s4">a.scroll(12);<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// scroll is in viewFrames.</p>
<p class="p9"><br></p>
<p class="p10">a.zoom(4);<span class="Apple-tab-span">	</span></p>
<p class="p9"><br></p>
<p class="p10">w.close;</p>
</body>
</html>
