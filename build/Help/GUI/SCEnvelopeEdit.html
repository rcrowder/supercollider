<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #1638e6}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p10 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #6b372a}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #1638e6}
span.s3 {color: #000000}
span.s4 {color: #2136a6}
span.s5 {color: #6f7178}
span.s6 {font: 14.0px Helvetica}
span.s7 {color: #6b372a}
span.s8 {color: #0000bf}
span.s9 {color: #606060}
span.s10 {color: #007300}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>SCEnvelopeEdit<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>an envelope editor view</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: Object : SCView : </b><a href="SCEnvelopeView.html"><span class="s2"><b>SCEnvelopeView</b></span></a></p>
<p class="p3"><br></p>
<p class="p1">An editable Envelope view.</p>
<p class="p2"><br></p>
<p class="p4"><span class="s3"><b>See also:</b> </span></span><span class="s4"> <a href="SCEnvelopeView.html"><span class="s2">SCEnvelopeView</span></a></span></p>
<p class="p2"><br></p>
<p class="p5"><b>Some Important Issues Regarding SCEnvelopeEdit</b></p>
<p class="p2"><br></p>
<p class="p1">The breakpoints are color coded as follows:</p>
<p class="p1"><span class="Apple-tab-span">	</span>blue -<span class="Apple-tab-span">	</span>normal</p>
<p class="p1"><span class="Apple-tab-span">	</span>red -<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>sustain node</p>
<p class="p1"><span class="Apple-tab-span">	</span>green -<span class="Apple-tab-span">	</span>loop node</p>
<p class="p2"><br></p>
<p class="p5"><b>Creation / Class Methods</b></p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*new (parent, bounds, env, pointsPerSegment)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>-  </span>The parent view.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="../Geometry/Rect.html"><span class="s5">Rect</span></a>,  </span>or  </span>a <a href="../Geometry/Point.html"><span class="s5">Point</span></a> indicating width@height.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>env </b>- The envelope. An instance of <a href="../Control/Env.html"><span class="s2">Env</span></a>.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>pointsPerSegment </b>- The resolution in  </span>points per segment. Default value is 10.</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*paletteExample (parent, bounds)</b></p>
<p class="p6"><br></p>
<p class="p10"><b>Accessing Instance and Class Variables</b></p>
<p class="p11"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>refresh</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>If the Env object is modified directly, this needs to be called to update the GUI.</p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxLevel</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxLevel_ (level)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes maximum level shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>level </b>- and Instance of <a href="../Math/Float.html"><span class="s2">Float</span></a>.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minLevel</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minLevel_ (level)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes minimum level shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>level </b>- and Instance of <a href="../Math/Float.html"><span class="s2">Float</span></a>.</p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minTime</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>minTime_ (sec)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes minimum time (sec) shown in editor.  </span>Negative times are okay because Env uses inter-node  </span>durations.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sec </b>- An instance of <a href="../Math/Float.html"><span class="s2">Float</span></a>. Seconds.</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxTime</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>maxTime_ (sec)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Changes maximum time (sec) shown in editor.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>sec </b>- An instance of <a href="../Math/Float.html"><span class="s2">Float</span></a>. Seconds.</p>
<p class="p6"><br></p>
<p class="p10"><b>Subclassing and Internal Methods </span></b></p>
<p class="p7"><span class="s6"><span class="Apple-tab-span">	</span></span>The following methods are usually not used directly or are called by a primitive. Programmers can still call or override these as needed. </span></p>
<p class="p8"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>defaultMauseDownAction (x, y, modifiers, buttonNumber, clickCount)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Short prose description of method.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>x </b>- Explanation of x. Default value is nil. Other information.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>y </b>- Explanation of y. Default value is nil. Other information.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>modifiers </b>- Explanation of modifiers. Default value is nil. Other information.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>buttonNumber </b>- Explanation of buttonNumber. Default value is nil. Other information.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>clickCount </b>- Explanation of clickCount. Default value is nil. Other information.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// inline example</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>g = <span class="s4">SCEnvelopeEdit</span>.defaultMauseDownAction;</p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>g.doSomething; <span class="s7">// explanation</span></p>
<p class="p14"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>g.cleanUpMethod;</p>
<p class="p6"><br></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>*viewClass</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>env_ (e)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>addBreakPoint (level)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>insertAtTime (time, level)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>pointsPerSegment</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>env</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>initSCEnvelopeEdit (argEnv, argPPS, setMinMax)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>redraw</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>updateAll</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>updateSegment (segNum)</b></p>
<p class="p7"><b><span class="Apple-tab-span">	</span>clear</b></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><b>Examples</b></p>
<p class="p15"><br></p>
<p class="p16">(</p>
<p class="p17">// make a basic editor</p>
<p class="p16">e = <span class="s8">Env</span>([1,2],[10]);</p>
<p class="p16">w = <span class="s8">SCWindow</span>(<span class="s9">"Env Editor"</span>, <span class="s8">Rect</span>(200,200,300,200));</p>
<p class="p16">v = <span class="s8">SCEnvelopeEdit</span>(w, w.view.bounds.moveBy(20,20).resizeBy(-40,-40), e, 20).resize_(5);</p>
<p class="p16">w.front;</p>
<p class="p16">)</p>
<p class="p16">v.addBreakPoint;</p>
<p class="p15"><br></p>
<p class="p16">v.clear;</p>
<p class="p16">v.redraw;</p>
<p class="p16">v;</p>
<p class="p16">)</p>
<p class="p15"><br></p>
<p class="p17"><span class="s3">v.maxLevel_(2);<span class="Apple-tab-span">	</span></span>// to give more headroom</p>
<p class="p17"><span class="s3">v.maxTime_(2);<span class="Apple-tab-span">	</span></span>// to increase release point</p>
<p class="p17"><span class="s3">v.minTime_(-1);<span class="Apple-tab-span">	</span></span>// to increase attack time</p>
<p class="p15"><br></p>
<p class="p17"><span class="s3">e.curves_ = </span><span class="s10">'sin'</span><span class="s3">;<span class="Apple-tab-span">	</span></span>// env object is changed</p>
<p class="p17"><span class="s3">v.refresh;<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// must refresh editor</p>
<p class="p15"><br></p>
<p class="p15"><br></p>
<p class="p15"><br></p>
<p class="p17">// Controlling a Synth</p>
<p class="p15"><br></p>
<p class="p16">s=<span class="s8">Server</span>.internal;</p>
<p class="p15"><br></p>
<p class="p16">(</p>
<p class="p16">e = <span class="s8">Env</span>([0, 1, 0.7, 0.9, 0], [0.03, 0.03, 0.03, 0.03], <span class="s10">'sin'</span>);</p>
<p class="p16">f = <span class="s8">Env</span>([0, 1, 0.7, 0.9, 0], [0.03, 0.03, 0.03, 0.03], <span class="s10">'sin'</span>);</p>
<p class="p16">w = <span class="s8">SCWindow</span>(<span class="s9">"Shards"</span>, <span class="s8">Rect</span>(100, 100, 500, 400));</p>
<p class="p16">v = <span class="s8">SCEnvelopeEdit</span>(w, w.view.bounds.resizeBy(-20, -200), e, 10).resize_(2);</p>
<p class="p16"><span class="s8">SCStaticText</span>(w, v.bounds).string_(<span class="s9">" amplitude"</span>).resize_(2);</p>
<p class="p16">x = <span class="s8">SCEnvelopeEdit</span>(w, v.bounds.moveBy(0, 200), f, 10).resize_(2);</p>
<p class="p16"><span class="s8">SCStaticText</span>(w, x.bounds).string_(<span class="s9">" frequency"</span>).resize_(2);</p>
<p class="p16">w.front;</p>
<p class="p16">)</p>
<p class="p15"><br></p>
<p class="p16">(</p>
<p class="p18"><span class="s8">SynthDef</span><span class="s3">(</span>"sineBlip"<span class="s3">, { </span></span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="s8">arg</span> freq=440, vol=0.1, la0, la1, la2, la3, la4, ta0, ta1, ta2, ta3, crva,</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>lf0, lf1, lf2, lf3, lf4, tf0, tf1, tf2, tf3, crvf;</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="s8">var</span> signal, fenv, aenv;</p>
<p class="p16"><span class="Apple-tab-span">	</span>fenv = <span class="s8">EnvGen</span>.ar(<span class="s8">Env</span>([lf0,lf1,lf2,lf3,lf4],[tf0,tf1,tf2,tf3], crvf));</p>
<p class="p16"><span class="Apple-tab-span">	</span>aenv = <span class="s8">EnvGen</span>.ar(<span class="s8">Env</span>([la0,la1,la2,la3,la4],[ta0,ta1,ta2,ta3], crva), doneAction: 2);</p>
<p class="p16"><span class="Apple-tab-span">	</span>signal = <span class="s8">SinOsc</span>.ar([freq, freq*2] * fenv) * aenv * vol;</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="s8">Out</span>.ar(0, signal.dup);</p>
<p class="p16">}).send(s);</p>
<p class="p16">)</p>
<p class="p15"><br></p>
<p class="p16">(</p>
<p class="p19">Routine<span class="s3">({</span></p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="s8">var</span> par, indices;</p>
<p class="p16"><span class="Apple-tab-span">	</span>indices = (2..21);</p>
<p class="p16"><span class="Apple-tab-span">	</span>loop({</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>par = (indices +++ (v.env.levels ++ v.env.times ++ v.env.curves ++ x.env.levels ++ x.env.times ++ x.env.curves)).flatten;</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>s.sendBundle(s.latency, [<span class="s10">\s_new</span>, <span class="s9">"sineBlip"</span>, -1, 1, 1, <span class="s10">\freq</span>, exprand(4e3,11e3)] ++ par);</p>
<p class="p16"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.04.wait;</p>
<p class="p16"><span class="Apple-tab-span">	</span>});</p>
<p class="p16">}).play;</p>
<p class="p16">)</p>
</body>
</html>
