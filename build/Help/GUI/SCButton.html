<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.35">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p7 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p8 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #000000}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p15 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #5c662f}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #bf0000}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0000bf}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #6f7179}
span.s3 {font: 9.0px Monaco}
span.s4 {color: #6f717a}
span.s5 {color: #6f7178}
span.s6 {color: #000000}
span.s7 {color: #0000bf}
span.s8 {color: #606060}
span.s9 {font: 14.0px Helvetica}
span.s10 {font: 9.0px Monaco; color: #51535a}
span.s11 {color: #bf0000}
span.s12 {color: #007300}
span.s13 {text-decoration: underline}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>SCButton<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>a multi-state button</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p1"><b>Inherits from: </b><a href="../Core/Object.html"><span class="s2"><b>Object</b></span></a><b> : </b><a href="SCView.html"><span class="s2"><b>SCView</b></span></a><b> : SCControlView</b></p>
<p class="p2"><br></p>
<p class="p3"><b>Some Important Issues Regarding SCButton</b></p>
<p class="p2"><br></p>
<p class="p1">Failure to set any <b>states</b> at all results in an invisible button.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1">The button performs its action upon releasing the mouse. In musical contexts, you might want to use <span class="s3">mouseDownAction_()<span class="Apple-converted-space"> </span></span> to set a function to be performed on pressing the mouse (see <a href="SCView.html"><span class="s4">SCView</span></a>, and examples below).</p>
<p class="p2"><br></p>
<p class="p1">If the drag contains a number, then <b>valueAction_()</b> is performed using the <b>currentDrag</b>. If the drag contains anything else, <b>action<span class="Apple-converted-space"> </span></b> ist set to the current drag. You could, for example, drag a function to an SCButton, and action would then be set to<span class="Apple-converted-space">  </span>that function.<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p3"><b>Creation / Class Methods</b></p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>*new (parent, bounds)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>parent </b>-<span class="Apple-converted-space">  </span>The parent view.</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>bounds </b>- An instance of <a href="../Geometry/Rect.html"><span class="s5">Rect</span></a>,<span class="Apple-converted-space">  </span>or<span class="Apple-converted-space">  </span>a <a href="../Geometry/Point.html"><span class="s5">Point</span></a> indicating width@height.</p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(</p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = </span><span class="s7">SCWindow</span><span class="s6">.new(</span>"The Four Noble Truths"<span class="s6">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(20,20,340,30))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s8">"there is suffering"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.red],</p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[</span>"the origin of suffering"<span class="s6">, </span><span class="s7">Color</span><span class="s6">.white, </span><span class="s7">Color</span><span class="s6">.black],</span></p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[</span>"the cessation of suffering"<span class="s6">, </span><span class="s7">Color</span><span class="s6">.red, </span><span class="s7">Color</span><span class="s6">.white],</span></p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[</span>"there is a path to cessation of suffering"<span class="s6">, </span><span class="s7">Color</span><span class="s6">.blue, </span><span class="s7">Color</span><span class="s6">.clear]</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>])</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s7">arg</span> butt;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>butt.value.postln;<span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s6">)</span></p>
<p class="p4"><br></p>
<p class="p13"><b>Accessing Instance and Class Variables</b></p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>states</b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>states_ (array)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>An array of labels and colors defining the states ofthe button</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>array </b>- an <a href="../Collections/Array.html"><span class="s2">Array</span></a> of arrays of the form <span class="Apple-converted-space">  </span>[<span class="Apple-converted-space">  </span>[String, strColor, bgColor] , <span class="Apple-converted-space">      </span>.... ]</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>value</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>Returns the index of the current state. This will <b>not</b><span class="Apple-converted-space">  </span>evaluate the function assigned to <b>action</b> (see <a href="SCView.html"><span class="s5">SCView</span></a>).</p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>value_ (val)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Sets the button to display the state at index <b>val</b> of the <b>states</b> array.<span class="Apple-converted-space">  </span>This will <b>not</b><span class="Apple-converted-space">  </span>evaluate the function assigned to <b>action</b> (see <a href="SCView.html"><span class="s5">SCView</span></a>).</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>val </b>- The index of an item in the <b>states</b> array .</p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>valueAction_ (val)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Sets the button to display the item at index <b>val</b> of the <b>states</b> array, and evaluates<span class="Apple-converted-space">  </span>action (see <a href="SCView.html"><span class="s5">SCView</span></a>), if the value has changed.</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>val </b>- The index of an item in the <b>states</b> array .<span class="Apple-converted-space"> </span></p>
<p class="p6"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>font</b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>font_ (argFont)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Sets the <a href="Font.html"><span class="s5">Font</span></a> of the button. Default value is the<span class="Apple-converted-space">  </span>default font: <span class="Apple-converted-space">  </span>Font.default .<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>argFont<span class="Apple-converted-space"> </span></b> - An instance of<span class="Apple-converted-space">  </span><a href="Font.html"><span class="s5">Font</span></a>.</p>
<p class="p14"><br></p>
<p class="p13"><b>Subclassing and Internal Methods<span class="Apple-converted-space"> </span></b></p>
<p class="p5"><span class="s9"><span class="Apple-tab-span">	</span></span>The following methods are usually not used directly or are called by a primitive. Programmers can still call or override these as needed.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>doAction (modifiers)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>The method called by the primitive upon releasing the mouse.</p>
<p class="p7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>modifiers </b>- A key modifier number, which is passed to the <b>action</b> as its second argument upon mouse-releasing the button.</p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>defaultKeyDownAction (char, modifiers, unicode)</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>The default keydown actions are:</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>key</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>action</b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>comment</b></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>" " <span class="Apple-converted-space">  <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>value + 1<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>space</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>\r <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>value + 1</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>\n, <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>value + 1<span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>3.asAscii,<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>value + 1<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(enter key or cmd-C on Mac OSX )</p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>To change these use <span class="s10">defaultKeyDownAction_</span> , see <a href="SCView.html"><span class="s5">SCView</span></a>.</p>
<p class="p4"><br></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>properties</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>A list of properties to which this view responds. See <a href="SCView.html"><span class="s5">SCView</span></a>.<span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p15"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>returns:</p>
<p class="p16"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[ </span>\bounds<span class="s6">, </span>\visible<span class="s6">, </span>\enabled<span class="s6">, </span>\canFocus<span class="s6">, </span>\resize<span class="s6">, </span>\background<span class="s6">, </span>\minWidth<span class="s6">, </span>\maxWidth<span class="s6">, </span>\minHeight<span class="s6">, </span>\maxHeight<span class="s6">, </span>\value<span class="s6">, </span>\font<span class="s6">, </span>\states<span class="s6"> ]</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p5"><b><span class="Apple-tab-span">	</span>defaultGetDrag</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The method called by default when initiating a drag <b>from</b> an SCButton. Returns the same as <b>value</b>.</p>
<p class="p6"><span class="Apple-tab-span">	</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>defaultCanReceiveDrag</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>The method called by default when attempting to drop a drag in this object. By default, SCButton will respond only to drags<span class="Apple-converted-space">  </span>where<span class="Apple-converted-space">  </span>the drag contains a <a href="../Math/Number.html"><span class="s2">Number</span></a> or<span class="Apple-converted-space">  </span><a href="../Core/Kernel/Function.html"><span class="s2">Function</span></a>. <span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-tab-span">	</span><b>defaultReceiveDrag</b></p>
<p class="p6"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p5"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>The default method called when a drag has been recieved. If the drag contains a number, then <b>action<span class="Apple-converted-space"> </span></b> ist set to the current drag. Otherwise <b>valueAction_()</b> is performed using the <b>currentDrag</b>. <span class="Apple-converted-space"> </span></p>
<p class="p6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><b>Examples</b></p>
<p class="p11"><br></p>
<p class="p12">(</p>
<p class="p12">w = <span class="s7">SCWindow</span>.new(<span class="s8">"Example"</span>);</p>
<p class="p11"><br></p>
<p class="p12">b = <span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(90,20,200,30))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s8">"sine"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.rand],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s8">"saw"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.rand],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s8">"noise"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.rand],</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[<span class="s8">"pulse"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.rand]</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>])</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s7">arg</span> butt;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>butt.value.postln;<span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12">w.front;</p>
<p class="p12">)</p>
<p class="p11"><br></p>
<p class="p17">// does not do action</p>
<p class="p12">b.value = 2;</p>
<p class="p11"><br></p>
<p class="p17">// does action if it results in a change of value</p>
<p class="p12">b.valueAction =<span class="Apple-converted-space">  </span>3;</p>
<p class="p11"><br></p>
<p class="p17">// clips to size of states</p>
<p class="p12">b.valueAction =<span class="Apple-converted-space">  </span>-1;</p>
<p class="p11"><br></p>
<p class="p17">// floats no problem</p>
<p class="p12">b.valueAction =<span class="Apple-converted-space">  </span>3.3;</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p17">//In a musical context, a button-down press is more meaningful than a button-up (release) as it's more<span class="Apple-converted-space"> </span></p>
<p class="p17">//intuitive to press a button on the beat. For that you can use SCView's mouseDownAction</p>
<p class="p17">//(a superclass of SCButton)</p>
<p class="p11"><br></p>
<p class="p12">(</p>
<p class="p12">s.waitForBoot({</p>
<p class="p12"><span class="Apple-tab-span">	</span>w = <span class="s7">SCWindow</span>.new;</p>
<p class="p12"><span class="Apple-tab-span">	</span>b = <span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(20,20,80,26))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[<span class="s8">"play"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.rand]])</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.mouseDownAction_({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = <span class="Apple-tab-span">	</span>{<span class="s7">EnvGen</span>.kr(<span class="s7">Env</span>.adsr,doneAction:2)*<span class="s7">SinOsc</span>.ar(440,0,0.4)}.play;<span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>})</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({ <span class="s7">arg</span> butt, mod;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a.release(0.3);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12">})</p>
<p class="p12">)</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p17">// if you drag a function to a button, the the button's action is set to that function.<span class="Apple-converted-space"> </span></p>
<p class="p17">// you can us this for swapping functions.</p>
<p class="p12">(</p>
<p class="p11"><br></p>
<p class="p12">s.waitForBoot({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">var</span> w,p,snd,b;</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>w = <span class="s7">SCWindow</span>.new;</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>b=<span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(20,20,80,26))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.states_([[<span class="s8">"start a sound"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.green],[<span class="s8">"stop"</span>, <span class="s7">Color</span>.black, <span class="s7">Color</span>.red]])</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.action_({});</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span>v=</span><span class="s7">SCVLayoutView</span><span class="s6">(w,</span><span class="s7">Rect</span><span class="s6">(140,20,200,300)); </span>//Group the following views</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">SCStaticText</span>(v, <span class="s7">Rect</span>(20,20,180,60))</p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_(</span>"The button does nothing at first, so try dragging a function to the button"<span class="s6">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">SCDragSource</span>(v, <span class="s7">Rect</span>(20,20,80,26))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_(</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="s7">|b|</span> (b.value==1).if{snd={ <span class="s7">SinOsc</span>.ar(440,0,0.6) }.play}{snd.free};}<span class="s11">//a button action function</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_(<span class="s8">"a play sine function"</span>).align_(<span class="s12">\center</span>).background_(<span class="s7">Color</span>.rand);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">SCDragSource</span>(v, <span class="s7">Rect</span>(20,20,80,26))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_(</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="s7">|b|</span> (b.value==1).if{snd={ <span class="s7">Saw</span>.ar(440,0.4) }.play}{snd.free};} <span class="s11">//a button action function</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_(<span class="s8">"a play saw function"</span>).align_(<span class="s12">\center</span>).background_(<span class="s7">Color</span>.rand);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">SCDragSource</span>(v, <span class="s7">Rect</span>(20,20,80,26))</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.object_(</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{<span class="s7">|b|</span> (b.value==1).if{snd={ <span class="s7">WhiteNoise</span>.ar(0.4) }.play}{snd.free};} <span class="s11">//a button action function</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>.string_(<span class="s8">"a play noise function"</span>).align_(<span class="s12">\center</span>).background_(<span class="s7">Color</span>.rand);</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span>p=</span><span class="s7">CmdPeriod</span><span class="s6">.add({b.value_(0)});</span>// set button to 0 on hitting Cmd-period</p>
<p class="p12"><span class="Apple-tab-span">	</span>w.onClose_{ snd.free; <span class="s7">CmdPeriod</span>.removeAll };<span class="s11">//clean up when window is closed</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p11"><br></p>
<p class="p12">})</p>
<p class="p12">)</p>
<p class="p11"><br></p>
<p class="p17">// Using <a href="../Core/Kernel/Routine.html"><span class="s13">Routine</span></a> to set button states on the fly.</p>
<p class="p12">(</p>
<p class="p12"><span class="s7">var</span> update, w, b;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s7">SCWindow</span>.new(<span class="s8">"State Window"</span>, <span class="s7">Rect</span>(150,<span class="s7">SCWindow</span>.screenBounds.height-140,380,60));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// a convenient way to set the button label</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update = {<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">|but, string|</span> but.states = [[string.asString, <span class="s7">Color</span>.black, <span class="s7">Color</span>.red]];<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>but.refresh;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(10,10,360,40));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.font_(<span class="s7">Font</span>(<span class="s8">"Impact"</span>, 24));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(b, </span>"there is only one state"<span class="s6">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// if an action should do something different each time it is called, a routine is the<span class="Apple-converted-space"> </span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// right thing to use. This is better than creating variables outside and setting them</p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// from the action function to keep state from one action to the next</p>
<p class="p11"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.action_(<span class="s7">Routine</span> { <span class="s7">|butt|</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>rrand(15, 45).do { <span class="s7">|i|</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, <span class="s8">"%. there is still only 1 state"</span>.format(i + 2));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield; <span class="s11">// stop here</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.close;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><br></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12">)</p>
<p class="p11"><br></p>
<p class="p17">// Using <a href="../Core/Kernel/Routine.html"><span class="s13">Routine</span></a> to set button states on the fly 2.</p>
<p class="p12">(</p>
<p class="p12">s.waitForBoot({</p>
<p class="p12"><span class="s7">var</span> update, w, b;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w = <span class="s7">SCWindow</span>.new(<span class="s8">"State Window"</span>, <span class="s7">Rect</span>(150,<span class="s7">SCWindow</span>.screenBounds.height-140,380,60));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// a convenient way to set the button label</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update = { <span class="s7">|but, string|</span><span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>but.states = [[string.asString, <span class="s7">Color</span>.black, <span class="s7">Color</span>.red]]; but.refresh };</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b = <span class="s7">SCButton</span>(w, <span class="s7">Rect</span>(10,10,360,40));</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.font_(<span class="s7">Font</span>(<span class="s8">"Impact"</span>, 24));</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p10"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(b, </span>"there is only one state"<span class="s6">);</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// if an action should do something different each time it is called, a routine is the<span class="Apple-converted-space"> </span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// right thing to use. This is better than creating variables outside and setting them</p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// from the action function to keep state from one action to the next</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>b.action_(<span class="s7">Routine</span> { <span class="s7">|butt|</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">var</span> synth, guessVal;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, <span class="s8">"there are only two states"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield; <span class="s11">// stop here</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, <span class="s8">"click me"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield; <span class="s11">// stop here</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, <span class="s8">"click me again"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield; <span class="s11">// stop here ..</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// create a synth</p>
<p class="p18"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth = { </span>|freq=1000, rate=5|<span class="s6"><span class="Apple-converted-space"> </span></span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">Ringz</span>.ar(</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">Impulse</span>.ar(rate.lag(4) * [1,1.01]), freq, rrand(0.01, 0.1),0.3</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>)<span class="Apple-converted-space"> </span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}.play;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>guessVal = exprand(200.0, 18000).round;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set(<span class="s12">\freq</span>, guessVal); <span class="s11">// set the synth</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, <span class="s8">"?"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>update.value(butt, guessVal.asString + <span class="s8">"Hz"</span>); <span class="s11">// display frequency</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.yield;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>synth.set(<span class="s12">\rate</span>, rrand(10, 50)); <span class="s11">// set trigger rate</span></p>
<p class="p17"><span class="s6"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// start an independent process</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fork({ 5.wait; synth.release; update.value(butt, <span class="s8">"."</span>); 1.wait; w.close }, <span class="s7">AppClock</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">CmdPeriod</span>.doOnce({w.close});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>w.front;</p>
<p class="p12">});</p>
<p class="p12">)</p>
<p class="p11"><br></p>
<p class="p11"><br></p>
<p class="p17">// complex drag and drop example</p>
<p class="p17">// try dragging the buttons<span class="Apple-converted-space">  </span>to white slot, adn then between white slots, or simply out fo the view</p>
<p class="p11"><br></p>
<p class="p12">(</p>
<p class="p12"><span class="s7">var</span> w, f, slots;</p>
<p class="p12"><span class="s7">var</span> insert, remove;</p>
<p class="p11"><br></p>
<p class="p12">slots = <span class="s7">Dictionary</span>.new;</p>
<p class="p11"><br></p>
<p class="p12">remove = {<span class="s7">arg</span> slot, id;</p>
<p class="p12"><span class="Apple-tab-span">	</span>[slot, id].postln;</p>
<p class="p12">};</p>
<p class="p11"><br></p>
<p class="p12">insert = {<span class="s7">arg</span> slot, fx;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if(fx!=<span class="s8">""</span>){</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>slots[<span class="s8">"slot"</span>++slot].value_(0).states_([[fx, <span class="s7">Color</span>.white, <span class="s7">Color</span>.blue]]);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[slot, fx].postln;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>}{</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>slots[<span class="s8">"slot"</span>++slot].value_(0).states_([[ <span class="s8">""</span>, <span class="s7">Color</span>.white, <span class="s7">Color</span>.white ]]);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>remove.value(slot, fx);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p12">};</p>
<p class="p11"><br></p>
<p class="p12">w = <span class="s7">SCWindow</span>.new(<span class="s8">""</span>,<span class="s7">Rect</span>(200, 400, 448, 180));</p>
<p class="p12">w.view.decorator = f = <span class="s7">FlowLayout</span>(w.view.bounds);</p>
<p class="p11"><br></p>
<p class="p10"><span class="s7">SCStaticText</span><span class="s6">(w, 400@20).string_(</span>"Drag &amp; Drop holding down Cmd-key"<span class="s6">);</span></p>
<p class="p12">f.nextLine;</p>
<p class="p12">6.do{<span class="s7">arg</span> i;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">var</span> fxwin, winOpen=<span class="s7">false</span>, empty = [ <span class="s8">""</span>, <span class="s7">Color</span>.white, <span class="s7">Color</span>.white ];</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>slots[<span class="s8">"slot"</span>++i] = <span class="s7">SCButton</span>.new(w, 70@70)</p>
<p class="p12"><span class="Apple-tab-span">	</span>.states_([empty])</p>
<p class="p12"><span class="Apple-tab-span">	</span>.action_({<span class="s7">|v|</span></p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>if((slots[<span class="s8">"slot"</span>++i].states[0][0]!=<span class="s8">""</span>)&amp;&amp;(winOpen==<span class="s7">false</span>)){</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fxwin = <span class="s7">SCWindow</span>(slots[<span class="s8">"slot"</span>++i].states[0][0], <span class="s7">Rect</span>(rrand(0,500),rrand(0,500),200,200)).front;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fxwin.view.background_(<span class="s7">Color</span>.rand);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>fxwin.onClose_({winOpen=<span class="s7">false</span>});</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>winOpen = <span class="s7">true</span>}</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{if(winOpen==<span class="s7">true</span>){fxwin.front}};</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p12"><span class="Apple-tab-span">	</span>})</p>
<p class="p12"><span class="Apple-tab-span">	</span>.canReceiveDragHandler_({<span class="s7">SCView</span>.currentDrag.isString})</p>
<p class="p12"><span class="Apple-tab-span">	</span>.receiveDragHandler_({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>insert.value(i, <span class="s7">SCView</span>.currentDrag);</p>
<p class="p12"><span class="Apple-tab-span">	</span>})</p>
<p class="p12"><span class="Apple-tab-span">	</span>.beginDragAction_({</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s7">var</span> drag;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>drag = slots[<span class="s8">"slot"</span>++i].states[0][0];</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>slots[<span class="s8">"slot"</span>++i].value_(0).states_([empty]);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>remove.value(i, <span class="s7">SCView</span>.currentDrag);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>drag;</p>
<p class="p12"><span class="Apple-tab-span">	</span>})</p>
<p class="p12"><span class="Apple-tab-span">	</span>.keyDownAction_({ <span class="s7">arg</span> view,char,modifiers,unicode,keycode;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>switch (keycode)</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>{51} {slots[<span class="s8">"slot"</span>++i].value_(0).states_([empty]);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>slots[<span class="s8">"slot"</span>++i].refresh;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>remove.value(i, <span class="s7">SCView</span>.currentDrag);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>};</p>
<p class="p12"><span class="Apple-tab-span">	</span>});</p>
<p class="p11"><br></p>
<p class="p12">};</p>
<p class="p11"><span class="Apple-tab-span">	</span></p>
<p class="p12">f.nextLine;</p>
<p class="p11"><br></p>
<p class="p12">[<span class="s8">"a"</span>, <span class="s8">"b"</span>, <span class="s8">"c"</span>, <span class="s8">"d"</span>, <span class="s8">"e"</span>, <span class="s8">"f"</span>].do{<span class="s7">arg</span> item, i;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="s7">SCButton</span>.new(w, 70@70)</p>
<p class="p12"><span class="Apple-tab-span">	</span>.states_([ [ item ] ])</p>
<p class="p12"><span class="Apple-tab-span">	</span>.action_({<span class="s7">|v|</span> })</p>
<p class="p12"><span class="Apple-tab-span">	</span>.beginDragAction_({item})</p>
<p class="p12">};</p>
<p class="p12">w.front;</p>
<p class="p12">)</p>
<p class="p11"><br></p>
</body>
</html>
