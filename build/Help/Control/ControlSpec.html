<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="949.54">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 13.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 85.0px; text-indent: -85.0px; font: 12.0px Helvetica}
p.p11 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #000000}
p.p12 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #000000; min-height: 12.0px}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 9.0px Monaco; color: #bf0000}
p.p14 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica}
p.p15 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p16 {margin: 0.0px 0.0px 0.0px 57.0px; text-indent: -57.0px; font: 11.0px Monaco}
p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; color: #91241c}
p.p18 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #446d1a}
p.p19 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #91241c}
p.p20 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #606060}
p.p21 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0e1db4}
span.s1 {font: 18.0px Helvetica}
span.s2 {color: #0e1db4}
span.s3 {color: #000000}
span.s4 {color: #0000bf}
span.s5 {color: #007300}
span.s6 {color: #606060}
span.s7 {font: 12.0px Helvetica}
span.s8 {color: #446d1a}
span.s9 {text-decoration: underline ; color: #0e1db4}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><span class="s1"><b>ControlSpec<span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b></span><b>specification for a control input</b><span class="s1"><b><span class="Apple-tab-span">	</span></b></span></p>
<p class="p2"><br></p>
<p class="p3"><b>Inherits from: Object : </b><a href="Spec.html"><span class="s2"><b>Spec</b></span></a></p>
<p class="p4"><br></p>
<p class="p3">The original, and most common spec (see <a href="Spec.html"><span class="s2">Spec</span></a> ). A ControlSpec is used by GUI sliders and knobs to specify the range and curve of the controls.<span class="Apple-converted-space">  </span>ControlSpec may be used in many ways to map from linear 0..1 range to your desired range and back.</p>
<p class="p2"><br></p>
<p class="p3">The most common way to create one is by<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p5"><span class="Apple-tab-span">	</span>anObject.asSpec</p>
<p class="p2"><br></p>
<p class="p6"><b>Creation / Class Methods</b></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>*new (minval, maxval, warp, step, default, units)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>minval </b>- The minimum vlue of the range.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>maxval </b>- The maximium value of the range.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>warp </b>- Can be \linear, \exponential (or in their short forms \lin and \exp), \sin, \cos, \amp or \db.<span class="Apple-converted-space">  </span>Default value is \lin. You can also use float values for defining the curvature, see examples below. If you use \exp, minval or maxval shouldn't be zero and should be of the same sign or else you will only get nans when you call the map method.</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>step </b>- The smallest possible increment</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>default </b>- The default value</p>
<p class="p10"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>units </b>- The units, e.g. "hz". Used by some gui's as a unit label.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>g = <span class="s4">ControlSpec</span>(1,2000,<span class="s5">\exp</span>,0.1, 220,<span class="s6">"Hz"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[1,<span class="s5">\exp</span>,0.1, 220,<span class="s6">"hz"</span>].asSpec;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>or add it to the <span class="s4">ControlSpec</span>.specs IdentityDictionary:</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s4">ControlSpec</span>.specs[<span class="s5">\myFreq</span>]=<span class="s4">ControlSpec</span>(1, 20000, <span class="s5">\exp</span>, 0.01, 440, units: <span class="s6">"Hz"</span>);</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p13"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>//using float values for curvature:</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = [0, 100, -5, 0, 0].asSpec;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(0, 0.01 .. 1).collect({<span class="s4">|item|</span> a.map(item); }).plot;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = [0, 100, -50, 0, 0].asSpec;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(0, 0.01 .. 1).collect({<span class="s4">|item|</span> a.map(item); }).plot;</p>
<p class="p12"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>a = [0, 100, 5, 0, 0].asSpec;</p>
<p class="p11"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(0, 0.01 .. 1).collect({<span class="s4">|item|</span> a.map(item); }).plot;</p>
<p class="p7"><br></p>
<p class="p14"><b>Accessing Instance and Class Variables</b></p>
<p class="p15"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>minval</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>minval_ (v)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>maxval</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>maxval_ (v)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>warp_(arg1)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>warp</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>step_(arg1)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>step</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>default_(arg1)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>default</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>units_(arg1)</b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>units</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>clipLo</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The lower of maxval and minval.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>clipHi</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b><span class="Apple-tab-span">	</span></p>
<p class="p8"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>The higher of maxval and minval</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>storeArgs</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p16"><span class="s7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns: </span>[minval,maxval,warp.asSpecifier,step,default,units]<span class="s7"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>constrain (value)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p16"><span class="s7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns<span class="Apple-converted-space"> </span></span> value.asFloat.clip(clipLo, clipHi).round(step)<span class="s7">.</span></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>range</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p16"><span class="s7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns </span>maxval - minval<span class="s7">.</span></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>ratio</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p16"><span class="s7"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Returns </span>maxval / minval<span class="s7">.</span></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>map (value)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Maps and constrains a <b>value</b> between 0 and 1 to the range between minval and maxval.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>unmap (value)</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Maps and constrains a <b>value</b> between minval and maxval to the range between 0 and 1.</p>
<p class="p7"><br></p>
<p class="p7"><br></p>
<p class="p8"><b><span class="Apple-tab-span">	</span>guessNumberStep</b></p>
<p class="p9"><b><span class="Apple-tab-span">	</span></b></p>
<p class="p8"><b><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></b>Used for EZ GUI classes for guessing a sensible <b>step</b> if none is specified.</p>
<p class="p9"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p14"><b>Examples</b></p>
<p class="p2"><br></p>
<p class="p17">// array is used as arguments to ControlSpec.new( minval, maxval, warp, step, default)</p>
<p class="p5">[300,3000,<span class="s8">\exponential</span>,100].asSpec.dump</p>
<p class="p5"><span class="s2">Instance</span> of <span class="s2">ControlSpec</span> {<span class="Apple-converted-space">    </span>(0313<span class="s2">FC08</span>, gc=00, fmt=00, flg=00, set=03)</p>
<p class="p5"><span class="Apple-converted-space">  </span>instance variables [6]</p>
<p class="p5"><span class="Apple-converted-space">    </span>minval : <span class="s2">Integer</span> 300</p>
<p class="p5"><span class="Apple-converted-space">    </span>maxval : <span class="s2">Integer</span> 3000</p>
<p class="p18"><span class="s3"><span class="Apple-converted-space">    </span>warp : </span><span class="s2">Symbol</span><span class="s3"> </span>'exponential'</p>
<p class="p5"><span class="Apple-converted-space">    </span>step : <span class="s2">Integer</span> 100</p>
<p class="p5"><span class="Apple-converted-space">    </span>default : <span class="s2">Integer</span> 300</p>
<p class="p5">}</p>
<p class="p4"><br></p>
<p class="p17">// partially specified ...</p>
<p class="p5">[-48,48].asSpec.dump</p>
<p class="p5"><span class="s2">Instance</span> of <span class="s2">ControlSpec</span> {<span class="Apple-converted-space">    </span>(0313<span class="s2">FF18</span>, gc=00, fmt=00, flg=00, set=03)</p>
<p class="p5"><span class="Apple-converted-space">  </span>instance variables [6]</p>
<p class="p5"><span class="Apple-converted-space">    </span>minval : <span class="s2">Integer</span> -48</p>
<p class="p5"><span class="Apple-converted-space">    </span>maxval : <span class="s2">Integer</span> 48</p>
<p class="p5"><span class="Apple-converted-space">    </span>warp : <span class="s2">Symbol</span> <span class="s8">'linear'</span></p>
<p class="p5"><span class="Apple-converted-space">    </span>step : <span class="s2">Float</span> 0</p>
<p class="p5"><span class="Apple-converted-space">    </span>default : <span class="s2">Integer</span> -48</p>
<p class="p5">}</p>
<p class="p2"><br></p>
<p class="p17">// a Symbol</p>
<p class="p3"><span class="s8">\freq</span>.asSpec.dump</p>
<p class="p5"><span class="s2">Instance</span> of <span class="s2">ControlSpec</span> {<span class="Apple-converted-space">    </span>(180<span class="s2">F4910</span>, gc=3<span class="s2">C</span>, fmt=00, flg=00, set=03)</p>
<p class="p5"><span class="Apple-converted-space">  </span>instance variables [8]</p>
<p class="p5"><span class="Apple-converted-space">    </span>minval : <span class="s2">Integer</span> 20</p>
<p class="p5"><span class="Apple-converted-space">    </span>maxval : <span class="s2">Integer</span> 20000</p>
<p class="p5"><span class="Apple-converted-space">    </span>warp : instance of <span class="s2">ExponentialWarp</span> (17<span class="s2">FEDB30</span>, size=1, set=1)</p>
<p class="p5"><span class="Apple-converted-space">    </span>step : <span class="s2">Integer</span> 0</p>
<p class="p5"><span class="Apple-converted-space">    </span>default : <span class="s2">Integer</span> 440</p>
<p class="p5"><span class="Apple-converted-space">    </span>units : <span class="s6">" Hz"</span></p>
<p class="p5"><span class="Apple-converted-space">    </span>clipLo : <span class="s2">Integer</span> 20</p>
<p class="p5"><span class="Apple-converted-space">    </span>clipHi : <span class="s2">Integer</span> 20000</p>
<p class="p5">}</p>
<p class="p3">In this case \freq was looked up in the Specs dictionary.<span class="Apple-converted-space">  </span>See <a href="Spec.html"><span class="s9">Spec</span></a></p>
<p class="p3">Some common mappings are initialized in ControlSpec.initClass</p>
<p class="p3">and also (for the moment) in Crucial-initClass</p>
<p class="p2"><br></p>
<p class="p17">// nil becomes a default ControlSpec</p>
<p class="p5"><span class="s2">nil</span>.asSpec.dump</p>
<p class="p5"><span class="s2">Instance</span> of <span class="s2">ControlSpec</span> {<span class="Apple-converted-space">    </span>(0313<span class="s2">FF18</span>, gc=00, fmt=00, flg=00, set=03)</p>
<p class="p5"><span class="Apple-converted-space">  </span>instance variables [6]</p>
<p class="p5"><span class="Apple-converted-space">    </span>minval : <span class="s2">Float</span> 0</p>
<p class="p5"><span class="Apple-converted-space">    </span>maxval : <span class="s2">Float</span> 1</p>
<p class="p5"><span class="Apple-converted-space">    </span>warp : <span class="s2">Symbol</span> <span class="s8">'linear'</span></p>
<p class="p5"><span class="Apple-converted-space">    </span>step : <span class="s2">Float</span> 0</p>
<p class="p5"><span class="Apple-converted-space">    </span>default : <span class="s2">Float</span> 0</p>
<p class="p5">}</p>
<p class="p2"><br></p>
<p class="p19">// example</p>
<p class="p4"><br></p>
<p class="p19">// make a frquency spec with an exponential range from 20 to 20000,<span class="Apple-converted-space"> </span></p>
<p class="p19">// give it a rounding of 30 (Hz)</p>
<p class="p5">a = <span class="s8">\freq</span>.asSpec;</p>
<p class="p5">a.step = 100;</p>
<p class="p4"><br></p>
<p class="p19">// equivalent:</p>
<p class="p5">a = [20, 20000, <span class="s8">'exp'</span>, 100, 440].asSpec;</p>
<p class="p5">a.dump;</p>
<p class="p4"><br></p>
<p class="p19"><span class="s3">a.constrain(800); </span>// make sure it is in range and round it.</p>
<p class="p19"><span class="s3">a.constrain(803); </span>// make sure it is in range and round it.<span class="Apple-tab-span">	</span></p>
<p class="p4"><br></p>
<p class="p5">a.map(0.5);</p>
<p class="p19"><span class="s3">a.map(0.0); </span>// returns min</p>
<p class="p19"><span class="s3">a.map(1.5); </span>// exceeds the area: clip, returns max</p>
<p class="p4"><br></p>
<p class="p5">a.unmap(4000);</p>
<p class="p5">a.unmap(22.0);<span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></p>
<p class="p19">// using spec for sliders:</p>
<p class="p5">(</p>
<p class="p5"><span class="s2">var</span> w, c, d;</p>
<p class="p5">w = <span class="s2">Window</span>.new(<span class="s6">"control"</span>, <span class="s2">Rect</span>(128, 64, 340, 160));</p>
<p class="p5">w.front;</p>
<p class="p5">c = <span class="s2">S</span>lider.new(w, <span class="s2">Rect</span>(10, 10, 300, 30));</p>
<p class="p5">d = <span class="s2">S</span>taticText.new(w, <span class="s2">Rect</span>(10, 40, 300, 30));</p>
<p class="p5">c.action = { </p>
<p class="p20"><span class="s3"><span class="Apple-tab-span">	</span>d.string = </span>"unmapped value"</p>
<p class="p5"><span class="Apple-tab-span">	</span>+ c.value.round(0.01)<span class="Apple-converted-space"> </span></p>
<p class="p20"><span class="s3"><span class="Apple-tab-span">	</span>+ </span>"......"<span class="s3"><span class="Apple-converted-space"> </span></span></p>
<p class="p20"><span class="s3"><span class="Apple-tab-span">	</span>+ </span>"mapped value"<span class="s3"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="Apple-tab-span">	</span>+ a.map(c.value)</p>
<p class="p5">};</p>
<p class="p5">)</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p3">ControlSpec-map can also be used to map ugens<span class="Apple-converted-space"> </span></p>
<p class="p5">(</p>
<p class="p5"><span class="s2">var</span> spec;</p>
<p class="p5">spec = [ 100,18000,<span class="s8">\exp</span>].asSpec;</p>
<p class="p5">{</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="s2">var</span> freq,osc;</p>
<p class="p5"><span class="Apple-tab-span">	</span>osc = <span class="s2">SinOsc</span>.kr(0.1).range(0,1);</p>
<p class="p5"><span class="Apple-tab-span">	</span>freq = spec.map(<span class="Apple-converted-space">  </span>osc );</p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p19"><span class="s3"><span class="Apple-tab-span">	</span>freq.dump;</span>// BinaryOpUGen</p>
<p class="p4"><br></p>
<p class="p21"><span class="s3"><span class="Apple-tab-span">	</span></span>SinOsc<span class="s3">.ar(</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span>freq</p>
<p class="p5"><span class="Apple-tab-span">	</span>)</p>
<p class="p5">}.play</p>
<p class="p4"><br></p>
<p class="p5">)<span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
<p class="p4"><span class="Apple-tab-span">	</span></p>
</body>
</html>
