<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.48">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Helvetica}
p.p6 {margin: 0.0px 0.0px 0.0px 57.0px; font: 12.0px Helvetica}
p.p7 {margin: 0.0px 0.0px 0.0px 57.0px; font: 14.0px Helvetica; min-height: 17.0px}
p.p8 {margin: 0.0px 0.0px 0.0px 57.0px; font: 9.0px Monaco}
p.p9 {margin: 0.0px 0.0px 0.0px 57.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Monaco; min-height: 16.0px}
p.p11 {margin: 0.0px 0.0px 0.0px 57.0px; font: 9.0px Monaco; color: #2c7014}
p.p12 {margin: 0.0px 0.0px 0.0px 57.0px; font: 9.0px Monaco; color: #ad140d}
p.p13 {margin: 0.0px 0.0px 0.0px 57.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
span.s1 {color: #0047e4}
span.s2 {color: #3366c8}
span.s3 {color: #001bb9}
span.s4 {color: #000000}
span.s5 {color: #2c7014}
span.s6 {color: #007300}
span.s7 {color: #ad140d}
</style>
</head>
<body>
<p class="p1"><b>Collection</b></p>
<p class="p2"><br></p>
<p class="p3"><b>superclass: </b><a href="../Core/Object.html"><span class="s1"><b>Object</b></span></a></p>
<p class="p2"><br></p>
<p class="p3">Collections are groups of objects. See the <a href="Collections.html"><span class="s2"><b>Collections</b></span></a> overview for a complete listing of all subclasses.</p>
<p class="p2"><br></p>
<p class="p3">Collection is an abstract class. You do not create direct instances of Collection.<span class="Apple-converted-space"> </span></p>
<p class="p3">There are many types of Collections including <a href="List.html"><span class="s1">List</span></a>, <a href="Array.html"><span class="s1">Array</span></a>, <a href="Dictionary.html"><span class="s1">Dictionary</span></a>, <a href="Bag.html"><span class="s1">Bag</span></a>, <a href="Set.html"><span class="s1">Set</span></a>, <a href="SortedList.html"><span class="s1">SortedList</span></a>, etc.<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p5"><b>Class Methods:</b></p>
<p class="p4"><br></p>
<p class="p3"><b>*newFrom(collection)</b></p>
<p class="p6">Creates a new Collection from another collection.</p>
<p class="p7"><br></p>
<p class="p8"><span class="s3">Array</span>.newFrom(<span class="s3">Set</span>[4, 2, 1]);</p>
<p class="p8"><span class="s3">Set</span>.newFrom(<span class="s3">Array</span>[4, 2, 1]);</p>
<p class="p4"><br></p>
<p class="p3"><b>*with(collection)</b></p>
<p class="p6">Creates a new Collection from the args.</p>
<p class="p7"><br></p>
<p class="p8"><span class="s3">Array</span>.with(4, 2, 1);</p>
<p class="p4"><br></p>
<p class="p3"><b>*fill(size, function)</b></p>
<p class="p6">Creates a Collection of the given size, the elements of which are determined by evaluation the given function. The function is passed the index as an argument.</p>
<p class="p7"><br></p>
<p class="p8"><span class="s3">Array</span>.fill(4, { <span class="s3">arg</span> i; i * 2 });</p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5"><b>Accessing:</b></p>
<p class="p4"><br></p>
<p class="p3"><b>size</b></p>
<p class="p6">Answers the number of objects contained in the Collection.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].size;</p>
<p class="p2"><br></p>
<p class="p3"><b>isEmpty</b></p>
<p class="p6">Answer whether the receiver contains no objects.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[].isEmpty;</p>
<p class="p10"><br></p>
<p class="p2"><br></p>
<p class="p5"><b>Adding and Removing:</b></p>
<p class="p2"><br></p>
<p class="p3"><b>add(anObject)</b></p>
<p class="p6">Add anObject to the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2].add(3);</p>
<p class="p2"><br></p>
<p class="p3"><b>addAll(aCollection)</b></p>
<p class="p6">Add all items in aCollection to the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2].addAll(<span class="s3">List</span>[3, 4]);</p>
<p class="p2"><br></p>
<p class="p3"><b>remove(anObject)</b></p>
<p class="p6">Remove anObject from the receiver. Answers the removed object.</p>
<p class="p9"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> a;</p>
<p class="p8">a = <span class="s3">List</span>[1, 2, 3, 4];</p>
<p class="p8">a.remove(3);</p>
<p class="p8">a;</p>
<p class="p8">)</p>
<p class="p2"><br></p>
<p class="p3"><b>removeAll(aCollection)</b></p>
<p class="p6">Remove all items in aCollection from the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].removeAll(<span class="s3">List</span>[2, 3]);</p>
<p class="p9"><br></p>
<p class="p6">Note that multiple items in the receiver will not necessarily be removed:</p>
<p class="p9"><br></p>
<p class="p11"><span class="s4">~closet = [</span>\hat<span class="s4">, </span>\hat<span class="s4">, </span>\hat<span class="s4">, </span>\coat<span class="s4">, </span>\coat<span class="s4">, </span>\shoe<span class="s4">, </span>\shoe<span class="s4">];</span></p>
<p class="p12"><span class="s4">~closet.removeAll([</span><span class="s5">\hat</span><span class="s4">, </span><span class="s5">\coat</span><span class="s4">, </span><span class="s5">\shoe</span><span class="s4">, </span><span class="s5">\shoe</span><span class="s4">]); </span>// Doesn't empty the closet, just removes what we wanted to</p>
<p class="p9"><br></p>
<p class="p6">See removeEvery (below) for a related method that removes <i>all</i> occurrences.</p>
<p class="p2"><br></p>
<p class="p3"><b>removeEvery(aCollection)</b></p>
<p class="p6">Remove <b><i>all occurrences</i></b> of the items in aCollection from the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 2, 3, 2, 3, 4].removeEvery(<span class="s3">List</span>[2, 3]);</p>
<p class="p2"><br></p>
<p class="p3"><b>removeAllSuchThat(function)</b></p>
<p class="p6">Remove all items in the receiver for which function answers true. The function is passed two arguments, the item and an integer index. Answers the objects which have been removed.</p>
<p class="p9"><br></p>
<p class="p8">(</p>
<p class="p8"><span class="s3">var</span> a;</p>
<p class="p8">a = <span class="s3">List</span>[1, 2, 3, 4];</p>
<p class="p8">a.removeAllSuchThat({ <span class="s3">arg</span> item, i; item &lt; 3 });</p>
<p class="p8">a;</p>
<p class="p8">)</p>
<p class="p3"><b>putEach(keys, values)</b></p>
<p class="p6">Put the <b>values</b> in the corresponding indices given by <b>keys</b>. If one of the two argument arrays is longer then it will wrap.</p>
<p class="p9"><br></p>
<p class="p8">y = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];</p>
<p class="p8">y.putEach([4, 7], [<span class="s6">\smelly</span>, <span class="s6">\head</span>])</p>
<p class="p8">y.putEach([2, 3, 5, 6], <span class="s6">\wotsits</span>);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><b>Testing:</b></p>
<p class="p2"><br></p>
<p class="p3"><b>includes(anObject)</b></p>
<p class="p6">Answer whether anObject is contained in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].includes(3);</p>
<p class="p2"><br></p>
<p class="p3"><b>includesAny(aCollection)</b></p>
<p class="p6">Answer whether any item in aCollection is contained in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].includesAny(<span class="s3">List</span>[4, 5]);</p>
<p class="p2"><br></p>
<p class="p3"><b>includesAll(aCollection)</b></p>
<p class="p6">Answer whether all items in aCollection are contained in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].includesAll(<span class="s3">List</span>[4, 5]);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p5"><b>Iteration:</b></p>
<p class="p2"><br></p>
<p class="p3"><b>do(function)</b></p>
<p class="p6">Evaluates function for each item in the collection. The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].do({ <span class="s3">arg</span> item, i; item.postln });</p>
<p class="p2"><br></p>
<p class="p3"><b>collect(function)</b></p>
<p class="p6">Answer a new collection which consists of the results of function evaluated for each item in the collection. The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].collect({ <span class="s3">arg</span> item, i; item + 10 });</p>
<p class="p9"><br></p>
<p class="p6">If you want to control what type of collection is returned, use <b>collectAs(function, class)</b>.</p>
<p class="p2"><br></p>
<p class="p3"><b>select(function)</b></p>
<p class="p6">Answer a new collection which consists of all items in the receiver for which function answers true. The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].select({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p9"><br></p>
<p class="p6">If you want to control what type of collection is returned, use <b>selectAs(function, class)</b>.</p>
<p class="p2"><br></p>
<p class="p3"><b>reject(function)</b></p>
<p class="p6">Answer a new collection which consists of all items in the receiver for which function answers false. The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].reject({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p9"><br></p>
<p class="p6">If you want to control what type of collection is returned, use <b>rejectAs(function, class)</b>.</p>
<p class="p2"><br></p>
<p class="p3"><b>detect(function)</b></p>
<p class="p6">Answer the first item in the receiver for which function answers true.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].detect({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p9"><br></p>
<p class="p3"><b>detectIndex(function)</b></p>
<p class="p6">Similar to detect but returns the index instead of the item itself.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].detectIndex({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p2"><br></p>
<p class="p3"><b>inject(initialValue, function)</b></p>
<p class="p6">In functional programming, the operation known as a fold.</p>
<p class="p6">inject takes an initial value and a function and combines the elements of the collection by applying the function to the accumulated value and an element from the collection. The function takes two arguments and returns the new value. The accumulated value is initialzed to initialValue.</p>
<p class="p9"><br></p>
<p class="p8">[1,2,3,4,5].inject(0, <span class="s3">_</span>+<span class="s3">_</span>); <span class="s7">// 15</span></p>
<p class="p13"><br></p>
<p class="p8">[1,2,3,4,5].inject(1, <span class="s3">_</span>*<span class="s3">_</span>); <span class="s7">// 120</span></p>
<p class="p13"><br></p>
<p class="p12">// same as .collect(_.squared)</p>
<p class="p8">[1,2,3,4,5].inject([], {<span class="s3">|a,b|</span> a ++ b.squared }); <span class="s7">// [ 1, 4, 9, 16, 25 ]</span></p>
<p class="p8">[1,2,3,4,5].inject([], {<span class="s3">|a,b|</span> [b] ++ a ++ [b]}); <span class="s7">// [ 5, 4, 3, 2, 1, 1, 2, 3, 4, 5 ]</span></p>
<p class="p8">[1,2,3,4,5].inject([], {<span class="s3">|a,b|</span> a ++ b ++ a});</p>
<p class="p8">[1,2,3,4,5].inject([], {<span class="s3">|a,b|</span> a ++ a ++ b});</p>
<p class="p14"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>any(function)</b></p>
<p class="p6">Answer whether function answers true for any item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].any({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p2"><br></p>
<p class="p3"><b>every(function)</b></p>
<p class="p6">Answer whether function answers true for every item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].every({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p2"><br></p>
<p class="p3"><b>count(function)</b></p>
<p class="p6">Answer the number of items for which function answers true.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].count({ <span class="s3">arg</span> item, i; item.even });</p>
<p class="p2"><br></p>
<p class="p3"><b>occurrencesOf(anObject)</b></p>
<p class="p6">Answer the number of items in the receiver which are equal to anObject.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 3, 4, 3, 4, 3].occurrencesOf(3);</p>
<p class="p2"><br></p>
<p class="p3"><b>sum(function)</b></p>
<p class="p6">Answer the sum of the results of function evaluated for each item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].sum;</p>
<p class="p13"><br></p>
<p class="p8">(0..8).sum { <span class="s3">|i|</span> 1 / (2 ** i) };</p>
<p class="p2"><br></p>
<p class="p3"><b>maxItem(function)</b></p>
<p class="p6">Answer the maximum of the results of function evaluated for each item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p6">If function is nil, then answer the maximum of all items in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].maxItem({ <span class="s3">arg</span> item, i; item + 10 });</p>
<p class="p2"><br></p>
<p class="p3"><b>minItem(function)</b></p>
<p class="p6">Answer the minimum of the results of function evaluated for each item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p6">If function is nil, then answer the minimum of all items in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].minItem({ <span class="s3">arg</span> item, i; item + 10 });</p>
<p class="p2"><br></p>
<p class="p3"><b>maxIndex(function)</b></p>
<p class="p6">Answer the index of the maximum of the results of function evaluated for each item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p6">If function is nil, then answer the maximum of all items in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].maxIndex({ <span class="s3">arg</span> item, i; item + 10 });</p>
<p class="p8">[3.2, 12.2, 13, 0.4].maxIndex</p>
<p class="p2"><br></p>
<p class="p3"><b>minIndex(function)</b></p>
<p class="p6">Answer the index of the minimum of the results of function evaluated for each item in the receiver.</p>
<p class="p6">The function is passed two arguments, the item and an integer index.</p>
<p class="p6">If function is nil, then answer the minimum of all items in the receiver.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].minIndex({ <span class="s3">arg</span> item, i; item + 10 });</p>
<p class="p8"><span class="s3">List</span>[3.2, 12.2, 13, 0.4].minIndex</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>iter</b></p>
<p class="p6">returns a <a href="../Core/Kernel/Routine.html"><span class="s2">Routine</span></a> that returns the elements one by one.</p>
<p class="p9"><br></p>
<p class="p8">r = <span class="s3">Set</span>[10, 2, -3, -4].iter;</p>
<p class="p8">r.next;</p>
<p class="p8">r.next;</p>
<p class="p8">r.next;</p>
<p class="p8">r.next; <span class="s7">// nil.</span></p>
<p class="p14"><br></p>
<p class="p4"><br></p>
<p class="p4"><br></p>
<p class="p5"><b>Conversion:</b></p>
<p class="p2"><br></p>
<p class="p3"><b>asBag</b></p>
<p class="p6">Answer a Bag to which all items in the receiver have been added.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].asBag;</p>
<p class="p2"><br></p>
<p class="p3"><b>asList</b></p>
<p class="p6">Answer a List to which all items in the receiver have been added.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">Set</span>[1, 2, 3, 4].asList;</p>
<p class="p2"><br></p>
<p class="p3"><b>asSet</b></p>
<p class="p6">Answer a Set to which all items in the receiver have been added.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[1, 2, 3, 4].asSet;</p>
<p class="p2"><br></p>
<p class="p3"><b>asSortedList</b></p>
<p class="p6">Answer a SortedList to which all items in the receiver have been added.</p>
<p class="p9"><br></p>
<p class="p8"><span class="s3">List</span>[2, 1, 4, 3].asSortedList;</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>powerset</b></p>
<p class="p6">Returns all possible combinations of the collection's elements.</p>
<p class="p13"><br></p>
<p class="p8"><span class="s3">Set</span>[1, 2, 3].powerset;</p>
<p class="p13"><br></p>
<p class="p12">// generate the von neumann ordinals. (warning: only count to four at maximum!)</p>
<p class="p8">a = <span class="s3">Set</span>[];</p>
<p class="p8">a = a.powerset;</p>
<p class="p8">a = a.powerset;</p>
<p class="p8">a = a.powerset;</p>
<p class="p13"><br></p>
<p class="p12"><span class="s4">u = { </span><span class="s3">|set|</span><span class="s4"> set.unify }; </span>// union (count down)</p>
<p class="p8">n = { <span class="s3">|set|</span> set.powerset }; <span class="s7">// powerset (count up)</span></p>
<p class="p12"><span class="s4">a = </span><span class="s3">Set</span><span class="s4">[]; </span>// empty set (zero)</p>
<p class="p8">n.(n.(a)); <span class="s7">// two</span></p>
<p class="p8">u.(n.(n.(a))) == n.(a); <span class="s7">// two - one == one</span></p>
<p class="p8">u.(u.(n.(n.(a)))) == u.(n.(a)); <span class="s7">// two - two == one - one<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><br></p>
<p class="p3"><b>flopDict(unbubble)</b></p>
<p class="p6">Takes a collection of dictionaries and returns a single dictionary with arrays of all dictionaries' elements.</p>
<p class="p6">If unbubble is true (default), and if one element is singular, the array is replaced by this element.</p>
<p class="p13"><br></p>
<p class="p8">[(degree: 7, x: 4), (degree: 8, x: 5), (degree: -2, dur: 2.5)].flopDict;</p>
<p class="p8">[(degree: 7, x: 4), (degree: 8, x: 5), (degree: -2, dur: 2.5)].flopDict(<span class="s3">false</span>);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>histo(steps, min, max)</b></p>
<p class="p6">Returns a histogram of the collection by counting the number of values that fall into each slot of <b>size (default: 100)</b> subdivisions between <b>min</b> and <b>max</b>. If there are any values outside this range, it posts a note. If min or max is not given, the smallest (or largest value respectively) is used.</p>
<p class="p13"><br></p>
<p class="p8">{ 1.0.linrand }.dup(10000).histo(1000).plot;</p>
<p class="p8">{ 8.rand }.dup(10000).histo(8).plot(discrete: <span class="s3">true</span>);</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3"><b>printOn(stream)</b></p>
<p class="p6">Print a representation of the collection to a stream.</p>
<p class="p2"><br></p>
<p class="p3"><b>storeOn(stream)</b></p>
<p class="p6">Write a compileable representation of the collection to a stream.</p>
<p class="p2"><br></p>
<p class="p3"><b>printItemsOn(stream)</b></p>
<p class="p6">Print a comma separated compileable representation of the items in the collection to a stream.</p>
<p class="p2"><br></p>
<p class="p3"><b>storeItemsOn(stream)</b></p>
<p class="p6">Write a comma separated compileable representation of the items in the collection to a stream.</p>
<p class="p2"><br></p>
</body>
</html>
